!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const o=n(1),i=n(2),s=n(3),c=n(4),u=n(5),a=r(n(6));function f(){let t=i.workspace.getConfiguration("rome").get("bin");return t&&s.existsSync(t)?t:(t=a.default.sync("rome",{nothrow:!0})||c.join(i.workspace.root,"node_modules","rome","bin","rome","index.js"),t&&s.existsSync(t)?t:"")}e.activate=async function(t){if(!i.workspace.getConfiguration("rome").get("enable"))return;const e=f();if(!e)return;const n=c.join(i.workspace.root,".config","rome.rjson");s.existsSync(n)||await async function(){if(!await i.workspace.showPrompt("Rome is found in your project, but configuration is missing, would you like to do 'rome init'?"))return;const t=f(),e=await i.workspace.createTerminal({cwd:i.workspace.root});e.sendText(t+" init"),await e.show(!0)}();const r={module:e,args:["lsp"],transport:i.TransportKind.stdio},a={outputChannel:i.workspace.createOutputChannel("Rome"),progressOnInitialization:!0,documentSelector:[{scheme:"file",language:"javascript"},{scheme:"file",language:"javascriptreact"},{scheme:"file",language:"typescript"},{scheme:"file",language:"typescriptreact"},{scheme:"file",language:"json"}]},p=new i.LanguageClient("rome","Rome",r,a);t.subscriptions.push(i.services.registLanguageClient(p)),t.subscriptions.push(i.commands.registerCommand("rome.cacheClear",async()=>{const{stdout:t}=await u.promisify(o.exec)(e+" cache clear");i.workspace.showMessage(t)}))}},function(t,e){t.exports=require("child_process")},function(t,e){t.exports=require("coc.nvim")},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("util")},function(t,e,n){const r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=n(4),i=r?";":":",s=n(7),c=t=>Object.assign(new Error("not found: "+t),{code:"ENOENT"}),u=(t,e)=>{const n=e.colon||i,o=t.match(/\//)||r&&t.match(/\\/)?[""]:[...r?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],s=r?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",c=r?s.split(n):[""];return r&&-1!==t.indexOf(".")&&""!==c[0]&&c.unshift(""),{pathEnv:o,pathExt:c,pathExtExe:s}},a=(t,e,n)=>{"function"==typeof e&&(n=e,e={}),e||(e={});const{pathEnv:r,pathExt:i,pathExtExe:a}=u(t,e),f=[],p=n=>new Promise((i,s)=>{if(n===r.length)return e.all&&f.length?i(f):s(c(t));const u=r[n],a=/^".*"$/.test(u)?u.slice(1,-1):u,p=o.join(a,t),d=!a&&/^\.[\\\/]/.test(t)?t.slice(0,2)+p:p;i(l(d,n,0))}),l=(t,n,r)=>new Promise((o,c)=>{if(r===i.length)return o(p(n+1));const u=i[r];s(t+u,{pathExt:a},(i,s)=>{if(!i&&s){if(!e.all)return o(t+u);f.push(t+u)}return o(l(t,n,r+1))})});return n?p(0).then(t=>n(null,t),n):p(0)};t.exports=a,a.sync=(t,e)=>{e=e||{};const{pathEnv:n,pathExt:r,pathExtExe:i}=u(t,e),a=[];for(let c=0;c<n.length;c++){const u=n[c],f=/^".*"$/.test(u)?u.slice(1,-1):u,p=o.join(f,t),l=!f&&/^\.[\\\/]/.test(t)?t.slice(0,2)+p:p;for(let t=0;t<r.length;t++){const n=l+r[t];try{if(s.sync(n,{pathExt:i})){if(!e.all)return n;a.push(n)}}catch(t){}}}if(e.all&&a.length)return a;if(e.nothrow)return null;throw c(t)}},function(t,e,n){var r;n(3);function o(t,e,n){if("function"==typeof e&&(n=e,e={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){o(t,e||{},(function(t,e){t?r(t):n(e)}))}))}r(t,e||{},(function(t,r){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,r=!1),n(t,r)}))}r="win32"===process.platform||global.TESTING_WINDOWS?n(8):n(9),t.exports=o,o.sync=function(t,e){try{return r.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}}},function(t,e,n){t.exports=i,i.sync=function(t,e){return o(r.statSync(t),t,e)};var r=n(3);function o(t,e,n){return!(!t.isSymbolicLink()&&!t.isFile())&&function(t,e){var n=void 0!==e.pathExt?e.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}(e,n)}function i(t,e,n){r.stat(t,(function(r,i){n(r,!r&&o(i,t,e))}))}},function(t,e,n){t.exports=o,o.sync=function(t,e){return i(r.statSync(t),e)};var r=n(3);function o(t,e,n){r.stat(t,(function(t,r){n(t,!t&&i(r,e))}))}function i(t,e){return t.isFile()&&function(t,e){var n=t.mode,r=t.uid,o=t.gid,i=void 0!==e.uid?e.uid:process.getuid&&process.getuid(),s=void 0!==e.gid?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),a=parseInt("001",8),f=c|u;return n&a||n&u&&o===s||n&c&&r===i||n&f&&0===i}(t,e)}}]));