webpackJsonp([31],{2710:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(2711)},2711:function(e,t,i){"use strict";var r=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=i(2712),s=function(e){function t(t){var i=e.call(this,t)||this;return i.orchestrationService=t,i.initializeOnAppLaunchAndReinit(),i}return r(t,e),t.$inject=["orchestrationService"],t.prototype.initializeOnAppLaunchAndReinit=function(e){},t.prototype.cleanupOnAppTeardown=function(e){},t.prototype.mtmaTelemetryIdentifier=function(){return"FocusManagementService"},t.prototype.createAbilityHelpers=function(e){return n.createAbilityHelpers(e)},t.prototype.disposeAbilityHelpers=function(e){n.disposeAbilityHelpers(e)},t}(teamspace.services.MTMABase);t.FocusManagementService=s,angular.module("teamspace.focusManagementService",["teamspace.orchestrationService"]).service("focusManagementService",s)},2712:function(e,t,i){"use strict";function r(e,t,i,r,n,s,o){try{var a=e[s](o),u=a.value}catch(e){return void i(e)}a.done?t(u):Promise.resolve(u).then(r,n)}function n(e){return function(){var t=this,i=arguments;return new Promise(function(n,s){function o(e){r(u,n,s,o,a,"next",e)}function a(e){r(u,n,s,o,a,"throw",e)}var u=e.apply(t,i);o(void 0)})}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function c(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function l(e,t,i){if(t.nodeType===Node.ELEMENT_NODE){var r=W?i:{acceptNode:i};return e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,r,!1)}}function h(e){var t=e.__ahCacheId,i=t?Y[t]:void 0;if(i)return i.rect;var r=e.ownerDocument&&e.ownerDocument.documentElement;if(!r)return new $;var n=0,s=0,o=r.clientWidth,a=r.clientHeight;if(e!==r){var u=e.getBoundingClientRect();n=Math.max(n,u.left),s=Math.max(s,u.top),o=Math.min(o,u.right),a=Math.min(a,u.bottom)}var c=new $(n<o?n:-1,s<a?s:-1,n<o?o-n:0,s<a?a-s:0);return t||(t="r-"+ ++X,e.__ahCacheId=t),Y[t]={rect:c,element:e},q||(q=window.setTimeout(function(){q=void 0;for(var e=0,t=Object.keys(Y);e<t.length;e++){var i=t[e];delete Y[i].element.__ahCacheId}Y={}},50)),c}function d(e){var t=_(e);if(t){var i=h(t),r=e.getBoundingClientRect();return r.top>=i.top&&r.bottom<=i.bottom}return!1}function f(e,t){void 0===t&&(t=0);var i=_(e);if(i){var r=h(i),n=e.getBoundingClientRect();return n.left>r.right||n.top>r.bottom||n.bottom<r.top||n.right<r.left?B.Invisible:n.top+t>=r.top&&n.top<=r.bottom&&n.bottom>=r.top&&n.bottom-t<=r.bottom&&n.left+t>=r.left&&n.left<=r.right&&n.right>=r.left&&n.right-t<=r.right?B.Visible:B.PartiallyVisible}return B.Invisible}function p(e,t){var i=_(e);if(i){var r=h(i),n=e.getBoundingClientRect();i.scrollTop+=t?n.top-r.top:n.bottom-r.bottom}}function _(e){var t=e.ownerDocument;if(t){for(var i=e.parentElement;i;i=i.parentElement)if(i.scrollWidth>i.clientWidth||i.scrollHeight>i.clientHeight)return i;return t.documentElement}return null}function v(e){e.__shouldIgnoreFocus=!0}function m(e){return!!e.__shouldIgnoreFocus}function g(e){var t=e.focus;t.__ahFocus?t.__ahFocus.call(e):e.focus()}function b(e){var t=new Uint32Array(4);if(e.crypto&&e.crypto.getRandomValues)e.crypto.getRandomValues(t);else if(e.msCrypto&&e.msCrypto.getRandomValues)e.msCrypto.getRandomValues(t);else for(var i=0;i<t.length;i++)t[i]=4294967295*Math.random();for(var r=[],n=0;n<t.length;n++)r.push(t[n].toString(36));return r.push("|"),r.push((++Q).toString(36)),r.push("|"),r.push(Date.now().toString(36)),r.join("")}function y(e,t){var i=e.__ahElementUID;return i||(i=e.__ahElementUID=b(t)),!Z[i]&&T(e.ownerDocument,e)&&(Z[i]=e),i}function w(e){var t=e.__ahCrossOriginWindowUID;return t||(t=e.__ahCrossOriginWindowUID=b(e)),t}function E(){for(var e=0,t=Object.keys(Z);e<t.length;e++){var i=t[e];delete Z[i]}}function T(e,t){var i;return!(null==e||null==(i=e.body)||!i.contains(t))}function F(e,t){var i=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector;return i&&i.call(e,t)}function k(e,t,i){var r,n,s,o=t.__ahElementUID,a=o?e.storageEntry(o):void 0,u=(null==(r=a)?void 0:r.ah)||{},c=null==(n=a)?void 0:n.attr;if(s=c?c.object:{},Object.keys(i).forEach(function(e){var t=i[e];if(void 0===t)u&&(delete u[e],delete s[e]);else switch(e){case"deloser":u[e]=i.deloser,s[e]=t.getBasicProps();break;case"root":u[e]=i.root,s[e]=t.getBasicProps();break;case"modalizer":u[e]=i.modalizer,s[e]=t.getBasicProps();break;case"focusable":u[e]=s[e]=i.focusable;break;case"groupper":u[e]=i.groupper,s[e]=t.getBasicProps();break;case"uberGroupper":u[e]=i.uberGroupper,s[e]=!0;break;case"observed":u[e]=s[e]=i.observed;break;case"outline":u[e]=s[e]=i.outline;break;default:throw new Error("Unknown helper.")}}),0===Object.keys(u).length)o&&a&&(delete a.ah,delete a.attr,e.storageEntry(o,!1)),t.removeAttribute(V);else{var l=JSON.stringify(s);a||(o||(o=y(t,e.getWindow())),a=e.storageEntry(o,!0)),a.ah=u,a.attr={string:l,object:s,changing:!0},c&&c.string===l||t.setAttribute(V,a.attr.string),a.attr.changing=!1}}function I(e,t){var i,r=t.__ahElementUID;return r?null==(i=e.storageEntry(r))?void 0:i.ah:void 0}function x(e,t){var i,r,n,s,o=t.getAttribute(V),a=t.__ahElementUID,u=a?e.storageEntry(a):void 0,c=null==(i=u)?void 0:i.attr,l=null==(r=u)?void 0:r.ah;if(o){if(o!==(c&&c.string))try{var h=JSON.parse(o);if("object"!=typeof h)throw new Error("Value is not a JSON object, got '"+o+"'.");c={string:o,object:h,changing:!1}}catch(e){}}else l&&(c=void 0);for(var d=(null==(n=u)?void 0:null==(s=n.attr)?void 0:s.object)||{},f=c&&c.object||{},p=0,_=Object.keys(d);p<_.length;p++){var v=_[p];if(!f[v])switch(v){case"deloser":e.deloser.remove(t);break;case"root":e.root.remove(t);break;case"modalizer":e.modalizer.remove(t);break;case"focusable":e.focusable.setProps(t,null);break;case"groupper":e.focusable.removeGroupper(t);break;case"uberGroupper":break;case"observed":e.observedElement.remove(t);break;case"outline":e.outline.setProps(t,null)}}for(var m=0,g=Object.keys(f);m<g.length;m++){var b=g[m];switch(b){case"deloser":l&&l.deloser?l.deloser.setProps(f.deloser):e.deloser.add(t,f.deloser);break;case"root":l&&l.root?l.root.setProps(f.root):e.root.add(t);break;case"modalizer":l&&l.modalizer?l.modalizer.setProps(f.modalizer):e.modalizer.add(t,f.modalizer);break;case"focusable":e.focusable.setProps(t,f.focusable||null);break;case"groupper":l&&l.groupper?l.groupper.setProps(f.groupper):e.focusable.addGroupper(t,f.groupper);break;case"uberGroupper":break;case"observed":l&&l.observed?e.observedElement.setProps(t,f.observed):e.observedElement.add(t,f.observed);break;case"outline":e.outline.setProps(t,f.outline||null);break;default:delete f[b],console.error("Unknown key '"+b+"' in data-ah attribute value.")}}c&&(c.object=f,c.string=JSON.stringify(f),c.changing=!0,u||(a||(a=y(t,e.getWindow())),u=e.storageEntry(a,!0)),u.attr=c,c.string!==o&&t.setAttribute(V,c.string),c.changing=!1)}function D(e,t,i,r){var n=y(t,e.getWindow()),s=e.storageEntry(n,!0);if(!s.aug){if(void 0===r)return;s.aug={}}if(void 0===r){if(i in s.aug){var o=s.aug[i];delete s.aug[i],null===o?t.removeAttribute(i):t.setAttribute(i,o)}}else i in s.aug||(s.aug[i]=t.getAttribute(i)),null===r?t.removeAttribute(i):t.setAttribute(i,r);void 0===r&&0===Object.keys(s.aug).length&&(delete s.aug,e.storageEntry(n,!1))}function O(e,t,i){if("undefined"==typeof MutationObserver)return function(){};var r=new MutationObserver(function(r){function n(t,i,r){s(t,i,r);var n=l(e,t,function(e){return s(e,i,r)});if(n)for(;n.nextNode(););}function s(e,r,n){if(!e.getAttribute)return NodeFilter.FILTER_SKIP;var s=e.__ahElementUID;s&&(r?delete Z[s]:n&&(Z[s]=e));var c=I(t,e);return c?(c.root&&o(c.root,r,n),c.modalizer&&a(c.modalizer,r,n),c.groupper&&u(e,c.groupper,r,n),c.observed&&h(e,r,n)):e.getAttribute(V)&&i(t,e),NodeFilter.FILTER_SKIP}function o(e,t,i){var r=f[e.uid];r||(r=f[e.uid]={root:e}),t&&(r.removedFrom=t),i&&(r.addedTo=i)}function a(e,t,i){var r=p[e.internalId];r||(r=p[e.internalId]={modalizer:e}),t&&(r.removedFrom=t),i&&(r.addedTo=i)}function u(e,t,i,r){var n=_[t.id];n||(n=_[t.id]={groupper:t}),i&&(n.removedFrom=i),r&&(n.addedTo=r)}function h(t,i,r){if(e.defaultView){var n=y(t,e.defaultView),s=v[n];s||(s=v[n]={element:t}),i&&(s.removedFrom=i),r&&(s.addedTo=r)}}for(var d,f={},p={},_={},v={},m=c(r);!(d=m()).done;){var g=d.value,b=g.target,w=g.removedNodes,E=g.addedNodes;if("attributes"===g.type){if(g.attributeName===V){var T,F=b.__ahElementUID,k=F?null==(T=t.storageEntry(F))?void 0:T.attr:void 0;k&&k.changing||i(t,b)}}else{var x=I(t,b),D=x&&x.root;D&&(f[D.uid]={root:D,addedTo:b});for(var O=0;O<w.length;O++)n(w[O],b.ownerDocument||e);for(var P=0;P<E.length;P++)n(E[P],void 0,b)}}for(var N=0,L=Object.keys(f);N<L.length;N++){var A=L[N],G=f[A];G.removedFrom&&C(G.removedFrom,{root:G.root,removed:!0}),G.addedTo&&C(G.addedTo,{root:G.root,removed:!1})}for(var U=0,z=Object.keys(p);U<z.length;U++){var M=z[U],S=p[M];S.removedFrom&&C(S.removedFrom,{modalizer:S.modalizer,removed:!0}),S.addedTo&&C(S.addedTo,{modalizer:S.modalizer,removed:!1})}for(var R=0,j=Object.keys(_);R<j.length;R++){var B=j[R],H=_[B];H.removedFrom&&!H.addedTo&&C(H.removedFrom,{groupper:H.groupper,removed:!0}),H.addedTo&&C(H.addedTo,{groupper:H.groupper,removed:!1})}for(var K=0,W=Object.keys(v);K<W.length;K++){var q=W[K],J=v[q];J.removedFrom&&!J.addedTo&&C(J.removedFrom,{observed:J.element,removed:!0}),J.addedTo&&C(J.addedTo,{observed:J.element,removed:!1})}});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[V]}),function(){r.disconnect()}}function C(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(oe,!0,!0),i.details=t,e.dispatchEvent(i)}function P(e){var t=function(e){var t=e.details.root;t&&(e.details.removed?delete ae[t.uid]:ae[t.uid]=t)};return e.addEventListener(oe,t),function(){e.removeEventListener(oe,t)}}function N(e,t){var i=y(e.getElement(),t);return be[i]||(be[i]=e),i}function L(e){var t=e.HTMLElement,i=t.prototype.focus,r=!1;return t.prototype.focus=function(){r=!0},e.document.createElement("button").focus(),t.prototype.focus=i,r}function A(e,t){var i=e.createElement("style");return i.type="text/css",i.appendChild(e.createTextNode(G(t))),e.head.appendChild(i),i}function G(e){return"\n."+e.areaClass+" *, ."+e.areaClass+" *:focus {\noutline: none !important;\n}\n\n."+e.outlineClass+" {\ndisplay: none;\nposition: absolute;\nwidth: 0;\nheight: 0;\nleft: 0;\ntop: 0;\nz-index: "+e.zIndex+";\n}\n\n."+e.outlineClass+"."+e.outlineClass+"_visible {\ndisplay: block;\n}\n\n."+e.outlineClass+"__left,\n."+e.outlineClass+"__top,\n."+e.outlineClass+"__right,\n."+e.outlineClass+"__bottom {\nposition: absolute;\nbackground: inherit;\n}"}function U(e){return new rt(e)}function z(e){rt.dispose(e)}function M(e,t){var i,r=null===e?void 0:JSON.stringify(e);return!0===t?r:(i={},i[V]=r,i)}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"Types",function(){return J}),i.d(t,"createAbilityHelpers",function(){return U}),i.d(t,"disposeAbilityHelpers",function(){return z}),i.d(t,"getAbilityHelpersAttribute",function(){return M});var S,R=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){var t=function(e){function t(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}function i(e,t,i,r){var s=t&&t.prototype instanceof n?t:n,o=Object.create(s.prototype),a=new f(r||[]);return o._invoke=c(e,i,a),o}function r(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function n(){}function s(){}function o(){}function a(e){["next","throw","return"].forEach(function(i){t(e,i,function(e){return this._invoke(i,e)})})}function u(e,t){function i(n,s,o,a){var u=r(e[n],e,s);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&g.call(l,"__await")?t.resolve(l.__await).then(function(e){i("next",e,o,a)},function(e){i("throw",e,o,a)}):t.resolve(l).then(function(e){c.value=e,o(c)},function(e){return i("throw",e,o,a)})}a(u.arg)}var n;this._invoke=function(e,r){function s(){return new t(function(t,n){i(e,r,t,n)})}return n=n?n.then(s,s):s()}}function c(e,t,i){var n=T;return function(s,o){if(n===k)throw new Error("Generator is already running");if(n===I){if("throw"===s)throw o;return _()}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var u=l(a,i);if(u){if(u===x)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===T)throw n=I,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=k;var c=r(e,t,i);if("normal"===c.type){if(n=i.done?I:F,c.arg===x)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=I,i.method="throw",i.arg=c.arg)}}}function l(e,t){var i=e.iterator[t.method];if(i===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,l(e,t),"throw"===t.method))return x;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var n=r(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,x;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,x):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,x)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function p(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(g.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:_}}function _(){return{value:v,done:!0}}var v,m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},y=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,i){return e[t]=i}}e.wrap=i;var T="suspendedStart",F="suspendedYield",k="executing",I="completed",x={},D={};D[y]=function(){return this};var O=Object.getPrototypeOf,C=O&&O(O(p([])));C&&C!==m&&g.call(C,y)&&(D=C);var P=o.prototype=n.prototype=Object.create(D);return s.prototype=P.constructor=o,o.constructor=s,s.displayName=t(o,E,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,t(e,E,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},a(u.prototype),u.prototype[w]=function(){return this},e.AsyncIterator=u,e.async=function(t,r,n,s,o){void 0===o&&(o=Promise);var a=new u(i(t,r,n,s),o);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(P),t(P,E,"Generator"),P[y]=function(){return this},P.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var r=t.pop();if(r in e)return i.value=r,i.done=!1,i}return i.done=!0,i}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return s.type="throw",s.arg=e,i.next=t,r&&(i.method="next",i.arg=v),!!r}if(this.done)throw e;for(var i=this,r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],s=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=g.call(n,"catchLoc"),a=g.call(n,"finallyLoc");if(o&&a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,x):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),x},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),d(i),x}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;d(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:p(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=v),x}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),V="data-ah";!function(e){e[e.Bootstrap=1]="Bootstrap",e[e.FocusElement=2]="FocusElement",e[e.State=3]="State",e[e.GetElement=4]="GetElement",e[e.RestoreFocusInDeloser=5]="RestoreFocusInDeloser",e[e.Ping=6]="Ping"}(S||(S={}));var j;!function(e){e[e.History=0]="History",e[e.DeloserDefault=1]="DeloserDefault",e[e.RootDefault=2]="RootDefault",e[e.DeloserFirst=3]="DeloserFirst",e[e.RootFirst=4]="RootFirst"}(j||(j={}));var B;!function(e){e[e.Invisible=0]="Invisible",e[e.PartiallyVisible=1]="PartiallyVisible",e[e.Visible=2]="Visible"}(B||(B={}));var H;!function(e){e[e.Unlimited=0]="Unlimited",e[e.Limited=1]="Limited",e[e.LimitedTrapFocus=2]="LimitedTrapFocus"}(H||(H={}));var K;!function(e){e[e.Both=0]="Both",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal",e[e.Grid=3]="Grid"}(K||(K={}));var W,q,J={__proto__:null,AbilityHelpersAttributeName:V,get CrossOriginTransactionType(){return S},get RestoreFocusOrder(){return j},get ElementVisibility(){return B},get GroupperFocusLimit(){return H},get GroupperNextDirection(){return K}},Y={},X=0,$="undefined"!=typeof DOMRect?DOMRect:function(){return function(e,t,i,r){this.left=e||0,this.top=t||0,this.right=(e||0)+(i||0),this.bottom=(t||0)+(r||0)}}(),Q=0,Z={};try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),W=!1}catch(e){W=!0}var ee;!function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down"}(ee||(ee={}));var te,ie,re,ne=function(){function e(){this._callbacks=[]}var t=e.prototype;return t.dispose=function(){this._callbacks=[],delete this._val},t.subscribe=function(e){this._callbacks.indexOf(e)<0&&this._callbacks.push(e)},t.unsubscribe=function(e){var t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)},t.setVal=function(e,t){this._val!==e&&(this._val=e,this._callCallbacks(e,t))},t.getVal=function(){return this._val},t.trigger=function(e,t){this._callCallbacks(e,t)},t._callCallbacks=function(e,t){this._callbacks.forEach(function(i){return i(e,t)})},e}(),se=function(e){function t(t,i){var r;return r=e.call(this)||this,r._isMouseUsed=!1,r._init=function(){r._initTimer=void 0;var e=r._win();e.document.body.addEventListener("mousedown",r._onMouseDown,!0),e.addEventListener("keydown",r._onKeyDown,!0),r._ah.focusedElement.subscribe(r._onFocus)},r._onMouseDown=function(e){0===e.buttons||0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY||(r._isMouseUsed=!0,r.setVal(!1,void 0))},r._onKeyDown=function(e){var t=r.isNavigatingWithKeyboard();t||e.keyCode!==ee.Tab?t&&e.keyCode===ee.Esc&&r._scheduleDismiss():r.setVal(!0,void 0)},r._onFocus=function(e,t){e&&(r._isMouseUsed?r._isMouseUsed=!1:r.isNavigatingWithKeyboard()||t.relatedTarget&&(t.isFocusedProgrammatically||void 0===t.isFocusedProgrammatically||r.setVal(!0,void 0)))},r._ah=t,r._win=i,r._initTimer=i().setTimeout(r._init,0),r}o(t,e);var i=t.prototype;return i.dispose=function(){e.prototype.dispose.call(this);var t=this._win();this._initTimer&&(t.clearTimeout(this._initTimer),this._initTimer=void 0),this._dismissTimer&&(t.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),t.document.body.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("keydown",this._onKeyDown,!0),this._ah.focusedElement.unsubscribe(this._onFocus)},t.dispose=function(e){e.dispose()},i.isNavigatingWithKeyboard=function(){return this.getVal()||!1},i._scheduleDismiss=function(){var e=this,t=this._win();this._dismissTimer&&(t.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);var i=this._ah.focusedElement.getFocusedElement();this._dismissTimer=t.setTimeout(function(){e._dismissTimer=void 0;var t=e._ah.focusedElement.getFocusedElement();i&&t&&i===t&&e.setVal(!1,void 0)},500)},t.setVal=function(e,t){e.setVal(t,void 0)},t}(ne),oe="ability-helpers:mutation-event",ae={},ue=function(){function e(e,t,i,r,n){this._knownModalizers={},this.uid=y(e,i()),this._element=e,this._ah=t,this._win=i,this._basic=n||{},this._forgetFocusedGrouppers=r,this._dummyInputFirstProps={isFirst:!0},this._dummyInputLastProps={isFirst:!1},this._dummyInputFirst=this._createDummyInput(this._dummyInputFirstProps),this._dummyInputLast=this._createDummyInput(this._dummyInputLastProps),this._add(),this._addDummyInputs()}var t=e.prototype;return t.dispose=function(){this._updateModalizersTimer&&(this._win().clearTimeout(this._updateModalizersTimer),this._updateModalizersTimer=void 0),this._remove(),this._knownModalizers={},this._forgetFocusedGrouppers=function(){}},t.setProps=function(e){e?this._basic=s({},this._basic,e):null===e&&(this._basic={})},t.getBasicProps=function(){return this._basic},t.move=function(e){this._remove(),this._element=e,this._add(),this.updateModalizers()},t.getElement=function(){return this._element},t.getCurrentModalizerId=function(){return this._curModalizerId},t.setCurrentModalizerId=function(e,t){this._curModalizerId=e,t||this.updateModalizers()},t.getModalizers=function(){for(var e=[],t=0,i=Object.keys(this._knownModalizers);t<i.length;t++){var r=i[t];e.push(this._knownModalizers[r])}return e},t.getModalizerById=function(e){return this._knownModalizers[e]},t.updateModalizers=function(){var e=this;this._updateModalizersTimer||(this.updateDummyInputs(),this._updateModalizersTimer=this._win().setTimeout(function(){e._updateModalizersTimer=void 0,e._reallyUpdateModalizers()},0))},t.updateDummyInputs=function(){this._addDummyInputs()},t.moveOutWithDefaultAction=function(e){e?(this._dummyInputFirstProps.shouldMoveOut=!0,g(this._dummyInputFirst)):(this._dummyInputLastProps.shouldMoveOut=!0,g(this._dummyInputLast))},t._add=function(){},t._remove=function(){this._removeDummyInputs()},t._reallyUpdateModalizers=function(){var e=this;if(this._element.ownerDocument){var t=[],i=l(this._element.ownerDocument,this._element,function(i){var r=I(e._ah,i);return r&&r.modalizer?(t.push(r.modalizer),NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_SKIP});if(i)for(;i.nextNode(););for(var r=void 0===this._curModalizerId,n=!1,s={},o=0;o<t.length;o++){var a=t[o],u=a.userId,c=u===this._curModalizerId;!r&&c&&(r=!!a.getBasicProps().isOthersAccessible),c&&(n=!0),s[u]=a}n||this.setCurrentModalizerId(void 0,!0),this._knownModalizers=s;for(var h=0;h<t.length;h++){var d=t[h],f=d.userId,p=void 0===this._curModalizerId||f===this._curModalizerId;d.setActive(p),d.setAccessible(d.getBasicProps().isAlwaysAccessible||r||p)}}},t._createDummyInput=function(e){var t=this,i=this._win().document.createElement("div");i.tabIndex=0,i.setAttribute("role","none"),i.setAttribute("aria-hidden","true");var r=i.style;return r.position="fixed",r.width=r.height="1px",r.left=r.top="-100500px",r.opacity="0",r.zIndex="-1",v(i),i.addEventListener("focusin",function(r){if(e.shouldMoveOut);else{se.setVal(t._ah.keyboardNavigation,!0),t._forgetFocusedGrouppers();var n=e.isFirst?t._ah.focusable.findFirst(t._element):t._ah.focusable.findLast(t._element);n?t._ah.focusedElement.focus(n):i.blur()}}),i.addEventListener("focusout",function(t){e.shouldMoveOut=!1}),i},t._addDummyInputs=function(){var e=this._element;e.lastElementChild!==this._dummyInputLast&&e.appendChild(this._dummyInputLast);var t=e.firstElementChild;t&&t!==this._dummyInputFirst&&e.insertBefore(this._dummyInputFirst,t)},t._removeDummyInputs=function(){var e=this._dummyInputFirst,t=this._dummyInputLast;e.parentElement&&e.parentElement.removeChild(e),t.parentElement&&t.parentElement.removeChild(t)},e}(),ce=function(){function e(t,i,r){var n=this;this._init=function(){n._initTimer=void 0;var e=n._win();e.document.addEventListener(oe,n._onMutation),n._unobserve=P(e.document)},this._onMutation=function(t){var i=t.details;if(i.root&&!i.removed&&i.root.getElement()===t.target&&i.root.updateDummyInputs(),t.target&&i.modalizer){var r=e._getRootOnly(n._ah,t.target);r&&r.updateModalizers()}},this._ah=t,this._win=i,this._forgetFocusedGrouppers=r,this._initTimer=i().setTimeout(this._init,0)}var t=e.prototype;return t.dispose=function(){var e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),e.document.removeEventListener(oe,this._onMutation),this._unobserve&&this._unobserve(),this._forgetFocusedGrouppers=function(){},delete this._unobserve},e.dispose=function(e){e.dispose()},t.add=function(e,t){var i=I(this._ah,e);if(!i||!i.root){var r=new ue(e,this._ah,this._win,this._forgetFocusedGrouppers,t);k(this._ah,e,{root:r}),C(e,{root:r})}},t.remove=function(e){var t=I(this._ah,e),i=t&&t.root;i&&(C(e,{root:i,removed:!0}),k(this._ah,e,{root:void 0}),i.dispose())},t.move=function(e,t){var i=I(this._ah,e),r=i&&i.root;r&&(r.move(t),k(this._ah,t,{root:r}),k(this._ah,e,{root:void 0}),C(e,{root:r,removed:!0}),C(t,{root:r}))},t.setProps=function(e,t){var i=I(this._ah,e);i&&i.root&&i.root.setProps(t)},e._getRootOnly=function(e,t){for(var i=t;i;i=i.parentElement){var r=I(e,i);if(r&&r.root)return r.root}},e.getRootByUId=function(e){return ae[e]},e.findRootAndModalizer=function(e,t){if(t.ownerDocument){for(var i,r,n=t;n;n=n.parentElement){var s=I(e,n);if(s&&(!r&&s.modalizer&&(r=s.modalizer),s.root)){i=s.root;break}}return i?{root:i,modalizer:r}:void 0}},e}(),le=function(){},he=function(e){function t(t,i){var r;return r=e.call(this)||this,r.uid=i.uid,r._ah=t,r._deloser=i,r}o(t,e);var i=t.prototype;return i.belongsTo=function(e){return e===this._deloser},i.unshift=function(e){this._deloser.unshift(e)},i.focusAvailable=function(){var e=n(R.mark(function e(){var t;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._deloser.findAvailable(),e.abrupt("return",!!t&&this._ah.focusedElement.focus(t));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i.resetFocus=function(){var e=n(R.mark(function e(){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this._deloser.resetFocus()));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(le),de=function(){function e(e,t){this._history=[],this._ah=e,this.rootUId=t}var t=e.prototype;return t.getLength=function(){return this._history.length},t.removeDeloser=function(e){this._history=this._history.filter(function(t){return!t.belongsTo(e)})},t.hasDeloser=function(e){return this._history.some(function(t){return t.belongsTo(e)})},e}(),fe=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var i=t.prototype;return i.unshiftToDeloser=function(e,t){for(var i,r=0;r<this._history.length;r++)if(this._history[r].belongsTo(e)){i=this._history[r],this._history.splice(r,1);break}i||(i=new he(this._ah,e)),i.unshift(t),this._history.unshift(i),this._history.splice(10,this._history.length-10)},i.focusAvailable=function(){var e=n(R.mark(function e(t){var i,r,n,s,o,a,u,l,h,d,f,p,_;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!!t,r=c(this._history);case 2:if((n=r()).done){e.next=14;break}if(s=n.value,t&&s.belongsTo(t)&&(i=!1),e.t0=!i,!e.t0){e.next=10;break}return e.next=9,s.focusAvailable();case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=12;break}return e.abrupt("return",!0);case 12:e.next=2;break;case 14:if(o=ce.getRootByUId(this.rootUId),!(a=o&&o.getModalizers())){e.next=33;break}u=c(a);case 18:if((l=u()).done){e.next=33;break}if(h=l.value,d=h.getElement(),f=I(this._ah,d),p=f&&f.deloser,_=p&&new he(this._ah,p),e.t1=_,!e.t1){e.next=29;break}return e.next=28,_.focusAvailable();case 28:e.t1=e.sent;case 29:if(!e.t1){e.next=31;break}return e.abrupt("return",!0);case 31:e.next=18;break;case 33:return e.abrupt("return",!1);case 34:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i.resetFocus=function(){var e=n(R.mark(function e(t){var i,r,n,s,o,a,u,l,h,d,f,p,_,v,m,g;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=!!t,r={},n=c(this._history);!(s=n()).done;)o=s.value,t&&o.belongsTo(t)&&(i=!1),i||r[o.uid]||(r[o.uid]=o);if(a=ce.getRootByUId(this.rootUId),u=a&&a.getModalizers())for(l=c(u);!(h=l()).done;)d=h.value,f=d.getElement(),p=I(this._ah,f),!(_=p&&p.deloser)||_.uid in r||(r[_.uid]=new he(this._ah,_));v=0,m=Object.keys(r);case 7:if(!(v<m.length)){e.next=16;break}return g=m[v],e.next=11,r[g].resetFocus();case 11:if(!e.sent){e.next=13;break}return e.abrupt("return",!0);case 13:v++,e.next=7;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t}(de),pe=function(){function e(e){this._history=[],this._ah=e}var t=e.prototype;return t.process=function(e){var t=this,i=ce.findRootAndModalizer(this._ah,e),r=i&&i.root.uid,n=ve.getDeloser(this._ah,e);if(r&&n){var s=this.make(r,function(){return new fe(t._ah,r)});return i&&i.modalizer&&i.root.getCurrentModalizerId()!==i.modalizer.userId||s.unshiftToDeloser(n,e),n}},t.make=function(e,t){for(var i,r=0;r<this._history.length;r++){var n=this._history[r];if(n.rootUId===e){i=n,this._history.splice(r,1);break}}return i||(i=t()),this._history.unshift(i),this._history.splice(10,this._history.length-10),i},t.removeDeloser=function(e){this._history.forEach(function(t){t.removeDeloser(e)}),this._history=this._history.filter(function(e){return e.getLength()>0})},t.focusAvailable=function(){var e=n(R.mark(function e(t){var i,r,n,s;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!!t,r=c(this._history);case 2:if((n=r()).done){e.next=14;break}if(s=n.value,t&&s.hasDeloser(t)&&(i=!1),e.t0=!i,!e.t0){e.next=10;break}return e.next=9,s.focusAvailable(t);case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=12;break}return e.abrupt("return",!0);case 12:e.next=2;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.resetFocus=function(){var e=n(R.mark(function e(t){var i,r,n,s;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!!t,r=c(this._history);case 2:if((n=r()).done){e.next=14;break}if(s=n.value,t&&s.hasDeloser(t)&&(i=!1),e.t0=!i,!e.t0){e.next=10;break}return e.next=9,s.resetFocus(t);case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=12;break}return e.abrupt("return",!0);case 12:e.next=2;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e}(),_e=function(){function e(e,t,i,r,n){var s=this;this._isActive=!1,this._history=[[]],this._snapshotIndex=0,this.isActive=function(){return s._isActive},this.setSnapshot=function(e){s._snapshotIndex=e,s._history.length>e+1&&s._history.splice(e+1,s._history.length-e-1),s._history[e]||(s._history[e]=[])},this.focusFirst=function(){return s._ah.focusedElement.focusFirst(s._element)},this.focusDefault=function(){return s._ah.focusedElement.focusDefault(s._element)},this.resetFocus=function(){return s._ah.focusedElement.resetFocus(s._element)},this.clearHistory=function(e){var t=s._element;s._history[s._snapshotIndex]=t?s._history[s._snapshotIndex].filter(function(i){return!!e&&t.contains(i)}):[]},this.uid=y(e,i()),this._ah=t,this._element=e,this._basic=r||{},this._extended=n||{}}var t=e.prototype;return t.setProps=function(e,t){e?this._basic=s({},this._basic,e):null===e&&(this._basic={}),t?this._extended=s({},this._extended,t):null===t&&(this._extended={})},t.getBasicProps=function(){return this._basic},t.move=function(e){this._remove(),this._element=e},t.dispose=function(){this._remove(),this._isActive=!1,this._snapshotIndex=0,this._basic={},this._extended={},this._history=[]},t.setActive=function(e){this._isActive=e},t.getActions=function(){return{focusDefault:this.focusDefault,focusFirst:this.focusFirst,resetFocus:this.resetFocus,clearHistory:this.clearHistory,setSnapshot:this.setSnapshot,isActive:this.isActive}},t.unshift=function(e){var t=this._history[this._snapshotIndex];for((t=this._history[this._snapshotIndex]=t.filter(function(t){return t!==e})).unshift(e);t.length>10;)t.pop()},t.findAvailable=function(){if(!this._ah.focusable.isVisible(this._element))return null;var e=this._basic.restoreFocusOrder,t=null,i=ce.findRootAndModalizer(this._ah,this._element);if(!i)return null;var r=i.root;if(void 0===e&&(e=r.getBasicProps().restoreFocusOrder),e===j.RootDefault&&(t=this._ah.focusable.findDefault(r.getElement())),t||e!==j.RootFirst||(t=this._findFirst(r.getElement())),t)return t;var n=this._findInHistory(),s=this._ah.focusable.findDefault(this._element),o=this._findFirst(this._element);return n&&e===j.History?n:s&&e===j.DeloserDefault?s:o&&e===j.DeloserFirst?o:s||n||o||null},t.customFocusLostHandler=function(e){return!!this._extended.onFocusLost&&this._extended.onFocusLost(e,this.getActions())},t.getElement=function(){return this._element},t._findInHistory=function(){var e=this,t=this._history[this._snapshotIndex].slice(0);this.clearHistory(!0);for(var i=0;i<t.length;i++){var r=t[i];if(this._element.contains(r)){if(this._ah.focusable.isFocusable(r))return r}else if(!this._basic.noSelectorCheck){var n=function(){var t=[];if(r.id&&t.push("#"+r.id),r.className&&r.className.split(" ").forEach(function(e){(e=e.trim())&&t.push("."+e)}),t.length){t.unshift(r.tagName.toLowerCase());for(var i=e._element.querySelectorAll(t.join("")),n=0;n<i.length;n++){var s=i[n];if(s&&e._ah.focusable.isFocusable(s))return{v:s}}}}();if("object"==typeof n)return n.v}}return null},t._findFirst=function(e){if(this._ah.keyboardNavigation.isNavigatingWithKeyboard()){var t=this._ah.focusable.findFirst(e);if(t)return t}return null},t._remove=function(){},e}(),ve=function(){function e(e,t){var i=this;this._isInSomeDeloser=!1,this._isRestoringFocus=!1,this._isPaused=!1,this._init=function(){i._initTimer=void 0,i._ah.focusedElement.subscribe(i._onFocus)},this._onFocus=function(e){if(i._restoreFocusTimer&&(i._win().clearTimeout(i._restoreFocusTimer),i._restoreFocusTimer=void 0),e){var t=i._history.process(e);t?(i._isInSomeDeloser=!0,t!==i._curDeloser&&(i._curDeloser&&i._curDeloser.setActive(!1),i._curDeloser=t),t.setActive(!0)):(i._isInSomeDeloser=!1,i._curDeloser=void 0)}else i._scheduleRestoreFocus()},this._ah=e,this._win=t,this._history=new pe(e),this._initTimer=t().setTimeout(this._init,0)}var t=e.prototype;return t.dispose=function(){var e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),this._restoreFocusTimer&&(e.clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),this._ah.focusedElement.unsubscribe(this._onFocus),delete this._curDeloser},e.dispose=function(e){e.dispose()},t.getActions=function(e){for(var t=e;t;t=t.parentElement){var i=I(this._ah,t);if(i&&i.deloser)return i.deloser.getActions()}},t.add=function(e,t,i){var r=I(this._ah,e);r&&r.deloser||k(this._ah,e,{deloser:new _e(e,this._ah,this._win,t,i)})},t.remove=function(e){var t=I(this._ah,e);if(t){var i=t.deloser;i&&(this._history.removeDeloser(i),i.isActive()&&this._scheduleRestoreFocus(),i.dispose(),k(this._ah,e,{deloser:void 0}))}},t.move=function(e,t){var i=I(this._ah,e);i&&i.deloser&&(i.deloser.move(t),k(this._ah,t,{deloser:i.deloser}),k(this._ah,e,{deloser:void 0}))},t.pause=function(){this._isPaused=!0,this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0)},t.resume=function(e){this._isPaused=!1,e&&this._scheduleRestoreFocus()},t.setProps=function(e,t,i){var r=I(this._ah,e);r&&r.deloser&&r.deloser.setProps(t,i)},t._isLastFocusedAvailable=function(){var e=this._ah.focusedElement.getLastFocusedElement();return!(!e||!e.offsetParent)},t._scheduleRestoreFocus=function(e){var t=this;if(!this._isPaused&&!this._isRestoringFocus){var i=function(){var i=n(R.mark(function i(){var r,n;return R.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t._restoreFocusTimer=void 0,e||!t._isRestoringFocus&&t._isInSomeDeloser&&!t._isLastFocusedAvailable()){i.next=3;break}return i.abrupt("return");case 3:if(!t._curDeloser){i.next=10;break}if(!(r=t._ah.focusedElement.getLastFocusedElement())||!t._curDeloser.customFocusLostHandler(r)){i.next=7;break}return i.abrupt("return");case 7:if(!(n=t._curDeloser.findAvailable())||!t._ah.focusedElement.focus(n)){i.next=10;break}return i.abrupt("return");case 10:return t._isInSomeDeloser=!1,t._curDeloser&&(t._curDeloser.setActive(!1),t._curDeloser=void 0),t._isRestoringFocus=!0,i.next=15,t._history.focusAvailable(null);case 15:if(i.sent){i.next=18;break}return i.next=18,t._history.resetFocus(null);case 18:t._isRestoringFocus=!1;case 19:case"end":return i.stop()}},i)}));return function(){return i.apply(this,arguments)}}();e?i():this._restoreFocusTimer=this._win().setTimeout(i,100)}},e.getDeloser=function(e,t){for(var i=t;i;i=i.parentElement){var r=I(e,i);if(r&&r.deloser)return r.deloser}},e.getHistory=function(e){return e._history},e.forceRestoreFocus=function(e){e._scheduleRestoreFocus(!0)},e}(),me="up",ge=!1,be={},ye=function(e){function t(t,i,r){var n;return n=e.call(this)||this,n._deloser=i,n._transactions=r,n}o(t,e);var i=t.prototype;return i.belongsTo=function(e){return e.deloserUId===this._deloser.deloserUId},i.focusAvailable=function(){var e=n(R.mark(function e(){var t;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s({},this._deloser,{reset:!1}),e.abrupt("return",this._transactions.beginTransaction(De,t).then(function(e){return!!e}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i.resetFocus=function(){var e=n(R.mark(function e(){var t;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s({},this._deloser,{reset:!0}),e.abrupt("return",this._transactions.beginTransaction(De,t).then(function(e){return!!e}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(le),we=function(e){function t(t,i,r){var n;return n=e.call(this,t,i)||this,n._transactions=r,n}o(t,e);var i=t.prototype;return i.unshift=function(e){for(var t,i=0;i<this._history.length;i++)if(this._history[i].belongsTo(e)){t=this._history[i],this._history.splice(i,1);break}t||(t=new ye(this._ah,e,this._transactions)),this._history.unshift(t),this._history.splice(10,this._history.length-10)},i.focusAvailable=function(){var e=n(R.mark(function e(){var t,i,r;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this._history);case 1:if((i=t()).done){e.next=9;break}return r=i.value,e.next=5,r.focusAvailable();case 5:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:e.next=1;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i.resetFocus=function(){var e=n(R.mark(function e(){var t,i,r;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c(this._history);case 1:if((i=t()).done){e.next=9;break}return r=i.value,e.next=5,r.resetFocus();case 5:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:e.next=1;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(de),Ee=function(){function e(e,t,i,r,n,s,o,a){var u,c=this;this._inProgress={},this._isDone=!1,this._isSelfResponding=!1,this._sentCount=0,this.ah=e,this.owner=t,this.ownerId=w(t()),this.id=b(t()),this.beginData=r,this._knownTargets=i,this._sentTo=s||(u={},u[this.ownerId]=!0,u),this.targetId=o,this.sendUp=a,this.timeout=n,this._promise=new Promise(function(e,t){c._resolve=e,c._reject=t})}var t=e.prototype;return t.getTargets=function(e){var t,i,r;return this.targetId===me?this.sendUp?(t={},t[me]={send:this.sendUp},t):null:this.targetId?e[this.targetId]?(i={},i[this.targetId]={send:e[this.targetId].send},i):null:0===Object.keys(e).length&&this.sendUp?(r={},r[me]={send:this.sendUp},r):Object.keys(e).length>0?e:null},t.begin=function(e){var t=this,i=this.getTargets(this._knownTargets),r=s({},this._sentTo);if(i)for(var n=0,o=Object.keys(i);n<o.length;n++)r[o[n]]=!0;var a={transaction:this.id,type:this.type,isResponse:!1,timestamp:Date.now(),owner:this.ownerId,sentto:r,timeout:this.timeout,beginData:this.beginData};if(this.targetId&&(a.target=this.targetId),e&&(this._isSelfResponding=!0,e(a).then(function(e){t._isSelfResponding=!1,void 0!==e&&(t.endData||(t.endData=e)),(t.endData||0===t._sentCount)&&t.end()})),i)for(var u=0,c=Object.keys(i);u<c.length;u++){var l=c[u];l in this._sentTo||this._send(i[l].send,l,a)}return 0!==this._sentCount||this._isSelfResponding||this.end(),this._promise},t._send=function(e,t,i){void 0===this._inProgress[t]&&(this._inProgress[t]=!0,this._sentCount++,e(i))},t.end=function(e){this._isDone||(this._isDone=!0,void 0===this.endData&&e?this._reject&&this._reject(e):this._resolve&&this._resolve(this.endData))},t.onResponse=function(e){var t=e.endData;void 0===t||this.endData||(this.endData=t);var i=e.target===me?me:e.owner;this._inProgress[i]&&(this._inProgress[i]=!1,this._sentCount--,(this.endData||0===this._sentCount&&!this._isSelfResponding)&&this.end())},e}(),Te=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.Bootstrap,t}return o(t,e),t.shouldForward=function(){return!1},t.makeResponse=function(){var e=n(R.mark(function e(t){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{isNavigatingWithKeyboard:t.keyboardNavigation.isNavigatingWithKeyboard()});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t}(Ee),Fe=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.FocusElement,t}return o(t,e),t.shouldForward=function(e,t,i){var r=xe.findElement(e,i,t.beginData);return!r||!e.focusable.isFocusable(r)},t.makeResponse=function(){var e=n(R.mark(function e(t,i,r,n,s,o){var a;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=xe.findElement(t,r,i.beginData),e.t0=!!a&&t.focusedElement.focus(a),e.t0){e.next=6;break}return e.next=5,o;case 5:e.t0=!!e.sent;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}},e)}));return function(t,i,r,n,s,o){return e.apply(this,arguments)}}(),t}(Ee);Fe.shouldSelfRespond=function(){return!0};var ke;!function(e){e[e.Focused=1]="Focused",e[e.Blurred=2]="Blurred",e[e.Observed=3]="Observed",e[e.DeadWindow=4]="DeadWindow",e[e.KeyboardNavigation=5]="KeyboardNavigation",e[e.Outline=6]="Outline"}(ke||(ke={}));var Ie=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.State,t}return o(t,e),t.shouldSelfRespond=function(e,t){return t.state!==ke.DeadWindow&&t.state!==ke.KeyboardNavigation},t.makeResponse=function(){var e=n(R.mark(function e(i,r,n,s,o,a,u){var c,l;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.timestamp,l=r.beginData,!c||!l){e.next=12;break}e.t0=l.state,e.next=e.t0===ke.Focused?6:e.t0===ke.Blurred?7:e.t0===ke.Observed?8:e.t0===ke.DeadWindow?9:e.t0===ke.KeyboardNavigation?10:e.t0===ke.Outline?11:12;break;case 6:return e.abrupt("return",t._makeFocusedResponse(i,c,l,o,u));case 7:return e.abrupt("return",t._makeBlurredResponse(i,c,l));case 8:return e.abrupt("return",t._makeObservedResponse(i,l));case 9:return e.abrupt("return",t._makeDeadWindowResponse(i,l,o,a));case 10:return e.abrupt("return",t._makeKeyboardNavigationResponse(i,l.isNavigatingWithKeyboard));case 11:return e.abrupt("return",t._makeOutlineResponse(i,l.outline));case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}},e)}));return function(t,i,r,n,s,o,a){return e.apply(this,arguments)}}(),t.createElement=function(e,t){return t.uid?new Pe(e,t.uid,t.ownerUId,t.id,t.rootUId,t.observedName,t.observedDetails):null},t._makeFocusedResponse=function(){var e=n(R.mark(function e(i,r,n,s,o){var a,u,c,l;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.createElement(i,n),n&&n.ownerUId&&a&&(te=n.ownerUId,ie=r,!o&&n.rootUId&&n.deloserUId&&(u=ve.getHistory(i.deloser),c={ownerUId:n.ownerUId,deloserUId:n.deloserUId,rootUId:n.rootUId},(l=u.make(n.rootUId,function(){return new we(i,c.rootUId,s)})).unshift(c)),Ne.setVal(i.crossOrigin.focusedElement,a,{isFocusedProgrammatically:n.isFocusedProgrammatically})),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e)}));return function(t,i,r,n,s){return e.apply(this,arguments)}}(),t._makeBlurredResponse=function(){var e=n(R.mark(function e(t,i,r){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r&&(r.ownerUId===te||r.force)&&(!ie||ie<i)&&Ne.setVal(t.crossOrigin.focusedElement,void 0,{}),e.abrupt("return",!0);case 2:case"end":return e.stop()}},e)}));return function(t,i,r){return e.apply(this,arguments)}}(),t._makeObservedResponse=function(){var e=n(R.mark(function e(i,r){var n,s;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.observedName,s=t.createElement(i,r),n&&s&&Le.trigger(i.crossOrigin.observedElement,s,{name:n,details:r.observedDetails}),e.abrupt("return",!0);case 4:case"end":return e.stop()}},e)}));return function(t,i){return e.apply(this,arguments)}}(),t._makeDeadWindowResponse=function(){var e=n(R.mark(function e(t,i,r,n){var s;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=i&&i.ownerUId)&&r.removeTarget(s),e.abrupt("return",n.then(function(){return s===te&&ve.forceRestoreFocus(t.deloser),!0}));case 3:case"end":return e.stop()}},e)}));return function(t,i,r,n){return e.apply(this,arguments)}}(),t._makeKeyboardNavigationResponse=function(){var e=n(R.mark(function e(t,i){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==i&&t.keyboardNavigation.isNavigatingWithKeyboard()!==i&&(ge=!0,se.setVal(t.keyboardNavigation,i),ge=!1),e.abrupt("return",!0);case 2:case"end":return e.stop()}},e)}));return function(t,i){return e.apply(this,arguments)}}(),t._makeOutlineResponse=function(){var e=n(R.mark(function e(t,i){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return re&&re.call(t.outline,i),e.abrupt("return",!0);case 2:case"end":return e.stop()}},e)}));return function(t,i){return e.apply(this,arguments)}}(),t}(Ee),xe=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.GetElement,t}return o(t,e),t.findElement=function(e,t,i){var r;if(i&&(!i.ownerId||i.ownerId===w(t())))if(i.id){if((r=t().document.getElementById(i.id))&&i.rootId){var n=ce.findRootAndModalizer(e,r);if(!n||n.root.uid!==i.rootId)return null}}else i.uid?r=Z[i.uid]:i.observedName&&(r=e.observedElement.getElement(i.observedName));return r||null},t.getElementData=function(e,t,i,r){var n=ve.getDeloser(e,t),s=ce.findRootAndModalizer(e,t),o=I(e,t),a=o&&o.observed;return{uid:y(t,i()),ownerUId:r,id:t.id||void 0,rootUId:s?s.root.uid:void 0,deloserUId:n?N(n,i()):void 0,observedName:a&&a.name,observedDetails:a&&a.details}},t.makeResponse=function(){var e=n(R.mark(function e(i,r,n,s,o,a){var u,c,l,h,d,f;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(u=r.beginData)?c=i.focusedElement.getFocusedElement():u&&(c=t.findElement(i,n,u)||void 0),c||!u){e.next=10;break}if(h=u.observedName,d=r.timeout,!h||!d){e.next=10;break}return e.next=8,new Promise(function(e,t){var r=!1,n=!1,s=!1;i.observedElement.waitElement(h,d).then(function(t){r=!0,s||!t&&!n||(s=!0,e({element:t}))}),a.then(function(t){n=!0,s||!t&&!r||(s=!0,e({crossOrigin:t}))})});case 8:(f=e.sent).element?c=f.element:f.crossOrigin&&(l=f.crossOrigin);case 10:return e.abrupt("return",c?t.getElementData(i,c,n,s):l);case 11:case"end":return e.stop()}},e)}));return function(t,i,r,n,s,o){return e.apply(this,arguments)}}(),t}(Ee);xe.shouldSelfRespond=function(){return!0};var De=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.RestoreFocusInDeloser,t}return o(t,e),t.makeResponse=function(){var e=n(R.mark(function e(t,i,r,n,s,o){var a,u,c,l,h;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:if(a=e.sent,u=!a&&i.beginData,c=u&&u.deloserUId,l=c&&be[c],!u||!l){e.next=9;break}return h=ve.getHistory(t.deloser),e.abrupt("return",u.reset?h.resetFocus(l):h.focusAvailable(l));case 9:return e.abrupt("return",!!a);case 10:case"end":return e.stop()}},e)}));return function(t,i,r,n,s,o){return e.apply(this,arguments)}}(),t}(Ee),Oe=function(e){function t(){var t;return t=e.apply(this,arguments)||this,t.type=S.Ping,t}return o(t,e),t.shouldForward=function(){return!1},t.makeResponse=function(){var e=n(R.mark(function e(){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t}(Ee),Ce=function(){function e(e,t){var i=this;this._knownTargets={},this._transactions={},this._isDefaultSendUp=!1,this.isSetUp=!1,this._onMessage=function(e){if(e.data.owner!==i._ownerUId&&i._ah){var t,r=e.data;if(r&&(t=r.transaction)&&r.type&&r.timestamp&&r.owner&&r.sentto){var n=i._knownTargets[r.owner];if(!n&&e.send&&r.owner!==i._ownerUId&&(n=i._knownTargets[r.owner]={send:e.send}),n&&(n.last=Date.now()),r.isResponse){var s=i._transactions[t];s&&s.transaction&&s.transaction.type===r.type&&s.transaction.onResponse(r)}else{var o=i._getTransactionClass(r.type),a=i.forwardTransaction(r);o&&e.send&&o.makeResponse(i._ah,r,i._owner,i._ownerUId,i,a,!1).then(function(t){var n={transaction:r.transaction,type:r.type,isResponse:!0,timestamp:Date.now(),owner:i._ownerUId,timeout:r.timeout,sentto:{},target:r.target===me?me:r.owner,endData:t};e.send(n)})}}}},this._onPageHide=function(){i._dead()},this._onBrowserMessage=function(e){if(e.source!==i._owner()){try{i._onMessage({data:JSON.parse(e.data),send:function(t){e.source&&e.source.postMessage&&e.source.postMessage(JSON.stringify(t),"*")}})}catch(e){}}},this._ah=e,this._owner=t,this._ownerUId=w(t())}var t=e.prototype;return t.setup=function(e){return this.isSetUp||(this.isSetUp=!0,this.setSendUp(e),this._owner().addEventListener("pagehide",this._onPageHide),this._ping()),this._onMessage},t.setSendUp=function(e){if(!this.isSetUp)throw new Error("CrossOrigin is not set up.");this.sendUp=e||void 0;var t=this._owner();return void 0===e?this._isDefaultSendUp||t.document&&(this._isDefaultSendUp=!0,t.parent&&t.parent!==t&&t.parent.postMessage&&(this.sendUp=function(e){t.parent.postMessage(JSON.stringify(e),"*")}),t.addEventListener("message",this._onBrowserMessage)):this._isDefaultSendUp&&(t.removeEventListener("message",this._onBrowserMessage),this._isDefaultSendUp=!1),this._onMessage},t.dispose=function(){var e=n(R.mark(function e(){var t,i,r,n,s;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._owner(),this._pingTimer&&(t.clearTimeout(this._pingTimer),this._pingTimer=void 0),t.removeEventListener("message",this._onBrowserMessage),t.removeEventListener("pagehide",this._onPageHide),e.next=6,this._dead();case 6:for(delete this._deadPromise,i=0,r=Object.keys(this._transactions);i<r.length;i++)n=r[i],(s=this._transactions[n]).timer&&(t.clearTimeout(s.timer),delete s.timer),s.transaction.end();this._knownTargets={},delete this.sendUp;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.beginTransaction=function(e,t,i,r,n,s){var o=this;if(!this._owner)return Promise.reject();var a,u=new e(this._ah,this._owner,this._knownTargets,t,i,r,n,this.sendUp);return e.shouldSelfRespond&&e.shouldSelfRespond(this._ah,t,this._owner,this._ownerUId)&&(a=function(t){return e.makeResponse(o._ah,t,o._owner,o._ownerUId,o,Promise.resolve(void 0),!0)}),this._beginTransaction(u,i,a,s)},t.removeTarget=function(e){delete this._knownTargets[e]},t._beginTransaction=function(e,t,i,r){var n=this,s=this._owner(),o={transaction:e,timer:s.setTimeout(function(){delete o.timer,e.end("Cross origin transaction timed out.")},1500+(t||0))};this._transactions[e.id]=o;var a=e.begin(i);return a.catch(function(){}).finally(function(){o.timer&&s.clearTimeout(o.timer),delete n._transactions[e.id]}),a.then(function(e){return e},r?void 0:function(){})},t.forwardTransaction=function(e){var t=e.target;if(t===this._ownerUId)return Promise.resolve();var i=this._getTransactionClass(e.type);if(i){if(void 0===i.shouldForward||i.shouldForward(this._ah,e,this._owner,this._ownerUId)){var r=e.sentto;return t===me&&(t=void 0,r[this._ownerUId]=!0),delete r[me],this._beginTransaction(new i(this._ah,this._owner,this._knownTargets,e.beginData,e.timeout,r,t,this.sendUp),e.timeout)}return Promise.resolve()}return Promise.reject("Unknown transaction type "+e.type)},t._getTransactionClass=function(e){switch(e){case S.Bootstrap:return Te;case S.FocusElement:return Fe;case S.State:return Ie;case S.GetElement:return xe;case S.RestoreFocusInDeloser:return De;case S.Ping:return Oe;default:return null}},t._dead=function(){var e=n(R.mark(function e(){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._deadPromise||te!==this._ownerUId||(this._deadPromise=this.beginTransaction(Ie,{ownerUId:this._ownerUId,state:ke.DeadWindow})),!this._deadPromise){e.next=4;break}return e.next=4,this._deadPromise;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._ping=function(){var e=n(R.mark(function e(){var t,i,r,n,s=this;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pingTimer){e.next=2;break}return e.abrupt("return");case 2:if(i=Date.now(),r=Object.keys(this._knownTargets).filter(function(e){return i-(s._knownTargets[e].last||0)>3e3}),this.sendUp&&r.push(me),!r.length){e.next=8;break}return e.next=8,Promise.all(r.map(function(e){return s.beginTransaction(Oe,void 0,void 0,void 0,e,!0).then(function(){return!0},function(){return e!==me&&(t||(t={}),t[e]=!0,delete s._knownTargets[e]),!1})}));case 8:if(!t){e.next=16;break}return e.next=11,this.beginTransaction(xe,void 0);case 11:if(!(!(n=e.sent)&&te&&te in t)){e.next=16;break}return e.next=15,this.beginTransaction(Ie,{ownerUId:this._ownerUId,state:ke.Blurred,force:!0});case 15:ve.forceRestoreFocus(this._ah.deloser);case 16:this._pingTimer=this._owner().setTimeout(function(){s._pingTimer=void 0,s._ping()},3e3);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),e}(),Pe=function(){function e(e,t,i,r,n,s,o){this._ah=e,this.uid=t,this.ownerId=i,this.id=r,this.rootId=n,this.observedName=s,this.observedDetails=o}return e.prototype.focus=function(e,t){return this._ah.crossOrigin.focusedElement.focus(this,e,t)},e}(),Ne=function(e){function t(t){var i;return i=e.call(this)||this,i._transactions=t,i}o(t,e);var i=t.prototype;return i.dispose=function(){e.prototype.dispose.call(this)},t.dispose=function(e){e.dispose()},i.focus=function(){var e=n(R.mark(function e(t,i,r){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._focus({uid:t.uid,id:t.id,rootId:t.rootId,ownerId:t.ownerId,observedName:t.observedName},i,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,r){return e.apply(this,arguments)}}(),i.focusById=function(){var e=n(R.mark(function e(t,i,r,n){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._focus({id:t,rootId:i},r,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,r,n){return e.apply(this,arguments)}}(),i.focusByObservedName=function(){var e=n(R.mark(function e(t,i,r,n,s){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._focus({observedName:t,rootId:r},n,s,i));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,r,n,s){return e.apply(this,arguments)}}(),i._focus=function(){var e=n(R.mark(function e(t,i,r,n){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._transactions.beginTransaction(Fe,s({},t,{noFocusedProgrammaticallyFlag:i,noAccessibleCheck:r}),n).then(function(e){return!!e}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,r,n){return e.apply(this,arguments)}}(),t.setVal=function(e,t,i){e.setVal(t,i)},t}(ne),Le=function(e){function t(t,i){var r;return r=e.call(this)||this,r._lastRequestFocusId=0,r._ah=t,r._transactions=i,r}o(t,e);var i=t.prototype;return i.dispose=function(){e.prototype.dispose.call(this)},t.dispose=function(e){e.dispose()},i.getElement=function(){var e=n(R.mark(function e(t){return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.waitElement(t,0));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i.waitElement=function(){var e=n(R.mark(function e(t,i){var r=this;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._transactions.beginTransaction(xe,{observedName:t},i).then(function(e){return e?Ie.createElement(r._ah,e):null}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),i.requestFocus=function(){var e=n(R.mark(function e(t,i){var r,n=this;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=++this._lastRequestFocusId,e.abrupt("return",this.waitElement(t,i).then(function(e){return!(n._lastRequestFocusId!==r||!e)&&n._ah.crossOrigin.focusedElement.focus(e)}));case 2:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),t.trigger=function(e,t,i){e.trigger(t,i)},t}(ne),Ae=function(){function e(e,t){var i=this;this._init=function(){i._initTimer=void 0;var e=i._ah;e.keyboardNavigation.subscribe(i._onKeyboardNavigationStateChanged),e.focusedElement.subscribe(i._onFocus),e.observedElement.subscribe(i._onObserved),re||(re=e.outline.setup,e.outline.setup=i._outlineSetup),i._transactions.beginTransaction(Te,void 0,void 0,void 0,me).then(function(e){e&&i._ah.keyboardNavigation.isNavigatingWithKeyboard()!==e.isNavigatingWithKeyboard&&(ge=!0,se.setVal(i._ah.keyboardNavigation,e.isNavigatingWithKeyboard),ge=!1)})},this._onKeyboardNavigationStateChanged=function(e){ge||i._transactions.beginTransaction(Ie,{state:ke.KeyboardNavigation,ownerUId:w(i._win()),isNavigatingWithKeyboard:e})},this._onFocus=function(e,t){var r=i._win(),n=w(r);i._blurTimer&&(r.clearTimeout(i._blurTimer),i._blurTimer=void 0),e?i._transactions.beginTransaction(Ie,s({},xe.getElementData(i._ah,e,i._win,n),{state:ke.Focused})):i._blurTimer=r.setTimeout(function(){i._blurTimer=void 0,te&&te===n&&i._transactions.beginTransaction(xe,void 0).then(function(e){e||te!==n||i._transactions.beginTransaction(Ie,{ownerUId:n,state:ke.Blurred,force:!1})})},0)},this._onObserved=function(e,t){var r=xe.getElementData(i._ah,e,i._win,w(i._win()));r.state=ke.Observed,r.observedName=t.name,r.observedDetails=t.details,i._transactions.beginTransaction(Ie,r)},this._outlineSetup=function(e){i._transactions.beginTransaction(Ie,{state:ke.Outline,ownerUId:w(i._win()),outline:e})},this._ah=e,this._win=t,this._transactions=new Ce(e,t),this.focusedElement=new Ne(this._transactions),this.observedElement=new Le(e,this._transactions)}var t=e.prototype;return t.setup=function(e){return this.isSetUp()?this._transactions.setSendUp(e):(this._initTimer=this._win().setTimeout(this._init,0),this._transactions.setup(e))},t.isSetUp=function(){return this._transactions.isSetUp},t.dispose=function(){this._initTimer&&(this._win().clearTimeout(this._initTimer),this._initTimer=void 0);var e=this._ah;e.keyboardNavigation.unsubscribe(this._onKeyboardNavigationStateChanged),e.focusedElement.unsubscribe(this._onFocus),e.observedElement.unsubscribe(this._onObserved),this._transactions.dispose(),Ne.dispose(this.focusedElement),Le.dispose(this.observedElement)},e.dispose=function(e){e.dispose()},e}(),Ge=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]"].join(", "),Ue=200,ze=0,Me={},Se={},Re=function(){function e(t,i,r){this._visibleGrouppers={},this._hasFullyVisibleGroupper=!1,this._prevVisibleGrouppers={},this._grouppers={},this._ah=t,this._win=r,this._element=i,this.id="fgc"+ ++ze,k(t,i,{uberGroupper:this}),e._containers[this.id]=this}var t=e.prototype;return t.dispose=function(){this._grouppers={};var t=this._win();this._updateVisibleTimer&&(t.clearTimeout(this._updateVisibleTimer),this._updateVisibleTimer=void 0),this._onChangeTimer&&(t.clearTimeout(this._onChangeTimer),this._onChangeTimer=void 0),k(this._ah,this._element,{uberGroupper:void 0}),delete e._containers[this.id]},t.getElement=function(){return this._element},t.addGroupper=function(e){this._grouppers[e.id]=e,this._setFirstLast(),this._updateVisible(!0)},t.removeGroupper=function(e){delete this._grouppers[e.id],delete this._visibleGrouppers[e.id],delete this._prevVisibleGrouppers[e.id],this._current===e&&this._setCurrent(void 0),this._setFirstLast(),this._updateVisible(!0)},t.setFocusedGroupper=function(e){e!==this._focused&&(this._focused=e,this._processOnChange())},t.setUnlimitedGroupper=function(e){e!==this._unlimited&&(this._unlimited=e,this._processOnChange())},t.forceUpdate=function(){this._processOnChange(!0)},t._processOnChange=function(e){var t=this;if(!this._onChangeTimer||e){var i=function(){t._onChangeTimer=void 0;var e=[];if(t._prevFocused!==t._focused){for(var i=0,r=Object.keys(t._grouppers);i<r.length;i++){var n=r[i];e.push(t._grouppers[n])}t._focused||t._prevFocused&&t._prevFocused.getBasicProps().memorizeCurrent||(t._setCurrent(void 0),t._prev=void 0,t._next=void 0),t._prevFocused=t._focused}if(t._prevCurrent!==t._current&&(e.push(t._prevCurrent),e.push(t._current),t._prevCurrent=t._current),t._prevPrev!==t._prev&&(e.push(t._prevPrev),e.push(t._prev),t._prevPrev=t._prev),t._prevNext!==t._next&&(e.push(t._prevNext),e.push(t._next),t._prevNext=t._next),t._prevFirst!==t._first&&(e.push(t._prevFirst),e.push(t._first),t._prevFirst=t._first),t._prevLast!==t._last&&(e.push(t._prevLast),e.push(t._last),t._prevLast=t._last),t._prevUnlimited!==t._unlimited&&(e.push(t._prevUnlimited),e.push(t._unlimited),t._prevUnlimited=t._unlimited),t._visibleGrouppers!==t._prevVisibleGrouppers){t._hasFullyVisibleGroupper=!1;for(var s=0,o=Object.keys(t._visibleGrouppers);s<o.length;s++){var a=o[s],u=t._visibleGrouppers[a];u!==t._prevVisibleGrouppers[a]&&e.push(t._grouppers[a]),u===B.Visible&&(t._hasFullyVisibleGroupper=!0)}for(var l=0,h=Object.keys(t._prevVisibleGrouppers);l<h.length;l++){var d=h[l];t._visibleGrouppers[d]!==t._prevVisibleGrouppers[d]&&e.push(t._grouppers[d])}t._prevVisibleGrouppers=t._visibleGrouppers}for(var f,p={},_=c(e.filter(function(e){return e&&t._grouppers[e.id]}));!(f=_()).done;){var v=f.value;if(v&&!p[v.id]){p[v.id]=!0;var m=v.getExtendedProps().onChange;m&&m(v.getState())}}};this._onChangeTimer&&this._win().clearTimeout(this._onChangeTimer),e?i():this._onChangeTimer=this._win().setTimeout(i,0)}},t._setFirstLast=function(){this._first=void 0,this._last=void 0;for(var e=this._element.firstElementChild;e;e=e.nextElementSibling){var t=I(this._ah,e);if(t&&t.groupper&&t.groupper.id in this._grouppers){this._first=t.groupper;break}}for(var i=this._element.lastElementChild;i;i=i.previousElementSibling){var r=I(this._ah,i);if(r&&r.groupper&&r.groupper.id in this._grouppers){this._last=r.groupper;break}}this._processOnChange()},t.setCurrentGroupper=function(e){this._setCurrent(e&&e.id in this._grouppers?e:void 0),this._prev=void 0,this._next=void 0;var t=this._current&&this._current.getElement();if(t&&t.parentElement===this._element){for(var i=t.previousElementSibling;i;i=i.previousElementSibling){var r=I(this._ah,i);if(r&&r.groupper){this._prev=r.groupper;break}}for(var n=t.nextElementSibling;n;n=n.nextElementSibling){var s=I(this._ah,n);if(s&&s.groupper){this._next=s.groupper;break}}}this._processOnChange()},t.getCurrentGroupper=function(){return this._current&&this._current.id in this._grouppers?this._current:(this._setCurrent(void 0),this._current||null)},t.getGroupperState=function(e){var t=e.getBasicProps(),i=t.isLimited,r=this._visibleGrouppers[e.id]||B.Invisible,n=this._current?this._current===e:void 0;return void 0===n&&t.lookupVisibility!==B.Invisible&&(r===B.Invisible||this._hasFullyVisibleGroupper&&r===B.PartiallyVisible)&&(n=!1),{isCurrent:n,isPrevious:this._prev===e,isNext:this._next===e,isFirst:this._first===e,isLast:this._last===e,isVisible:r,hasFocus:this._focused===e,siblingHasFocus:!!this._focused&&this._focused!==e,siblingIsVisible:this._hasFullyVisibleGroupper,isLimited:(i===H.Limited||i===H.LimitedTrapFocus)&&this._unlimited!==e}},t.isEmpty=function(){return 0===Object.keys(this._grouppers).length},t._setCurrent=function(e){var t=this._current;t!==e&&(t&&Se[t.id]&&delete Se[t.id],e&&(Se[e.id]=e),this._current=e)},t._updateVisible=function(e){var t=this;if(!this._updateVisibleTimer){if(e)for(var i=this._element.parentElement;i;i=i.parentElement){var r=I(this._ah,i);r&&r.uberGroupper&&r.uberGroupper._updateVisible(!1)}this._updateVisibleTimer=this._win().setTimeout(function(){t._updateVisibleTimer=void 0;for(var e=!1,i={},r=0,n=Object.keys(t._grouppers);r<n.length;r++){var s=n[r],o=f(t._grouppers[s].getElement(),10),a=t._visibleGrouppers[s]||B.Invisible;o!==B.Invisible&&(i[s]=o),a!==o&&(e=!0)}e&&(t._prevVisibleGrouppers=t._visibleGrouppers,t._visibleGrouppers=i,t._processOnChange())},0)}},e.updateVisible=function(t){for(var i,r={},n=c(t);!(i=n()).done;)for(var s=i.value,o=0,a=Object.keys(e._containers);o<a.length;o++){var u=a[o],l=e._containers[u];s.contains(l.getElement())&&(r[l.id]=l)}for(var h=0,d=Object.keys(r);h<d.length;h++)r[d[h]]._updateVisible(!1)},e}();Re._containers={};var Ve,je,Be=function(){function e(e,t,i,r,n){this._ah=e,this._win=i,this._element=t,this._basic=r||{},this._extended=n||{},this.id="fg"+ ++ze,k(this._ah,t,{groupper:this}),this.setupContainer()}var t=e.prototype;return t.dispose=function(){this._container&&this._container.removeGroupper(this),this.setupContainer(!0),k(this._ah,this._element,{groupper:void 0})},t.getBasicProps=function(){return this._basic},t.getExtendedProps=function(){return this._extended},t.setProps=function(e,t){e?this._basic=s({},this._basic,e):null===e&&(this._basic={}),t?this._extended=s({},this._extended,t):null===t&&(this._extended={})},t.getElement=function(){return this._element},t.moveTo=function(e){this._element!==e&&(this.setupContainer(!0),this._element=e,this.setupContainer())},t.getState=function(){return this._container?this._container.getGroupperState(this):{isCurrent:void 0,isPrevious:!1,isNext:!1,isFirst:!1,isLast:!1,isVisible:B.Invisible,hasFocus:!1,siblingIsVisible:!1,siblingHasFocus:!1,isLimited:!1}},t.setCurrent=function(e){this._container&&this._container.setCurrentGroupper(e?this:void 0)},t.isDefault=function(){var e=this._basic.isDefault||this._extended.isDefault;return"function"==typeof e?e.call(this._element):e},t.setFocused=function(e){this._container&&this._container.setFocusedGroupper(e?this:void 0)},t.setUnlimited=function(e){!this._container||this._basic.isLimited!==H.Limited&&this._basic.isLimited!==H.LimitedTrapFocus||this._container.setUnlimitedGroupper(e?this:void 0)},t.forceUpdate=function(){this._container&&this._container.forceUpdate()},t.setupContainer=function(e){var t,i=this._element.parentElement,r=this._container;if(i){var n=I(this._ah,i);(t=n&&n.uberGroupper)||e||(t=new Re(this._ah,i,this._win))}r&&(e||r!==t)&&r.removeGroupper(this),this._container=t,t&&!e&&t.addGroupper(this)},e}(),He=function(){function e(e,t){var i=this;this._scrollTargets=[],this._init=function(){i._initTimer=void 0;var e=i._win();e.document.addEventListener(oe,i._onMutation,!0),e.addEventListener("scroll",i._onScroll,!0),i._ah.focusedElement.subscribe(i._onFocus)},this._onFocus=function(e){e&&i._updateFocusedGrouppers(e)},this._onMutation=function(e){e.target&&e.details.groupper&&e.details.groupper.setupContainer(e.details.removed)},this._onScroll=function(e){for(var t,r=!1,n=c(i._scrollTargets);!(t=n()).done;)if(t.value===e.target){r=!0;break}!r&&e.target.contains&&i._scrollTargets.push(e.target);var s=i._win();i._scrollTimer&&s.clearTimeout(i._scrollTimer),i._scrollTimer=s.setTimeout(function(){i._scrollTimer=void 0,Re.updateVisible(i._scrollTargets),i._scrollTargets=[]},Ue)},this._ah=e,this._win=t,this._initTimer=t().setTimeout(this._init,0)}var t=e.prototype;return t.dispose=function(){var e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),this._scrollTimer&&(e.clearTimeout(this._scrollTimer),this._scrollTimer=void 0),e.document.removeEventListener(oe,this._onMutation,!0),this._ah.focusedElement.unsubscribe(this._onFocus),this._scrollTargets=[]},e.dispose=function(e){e.dispose()},t._getBody=function(){var e=this._ah.focusedElement.getLastFocusedElement();return e&&e.ownerDocument?e.ownerDocument.body:this._win().document.body},e.forgetFocusedGrouppers=function(e){e._updateFocusedGrouppers(null,!0)},t._updateFocusedGrouppers=function(e,t){for(var i={},r=e;r;r=r.parentElement){var n=I(this._ah,r);n&&n.groupper&&(i[n.groupper.id]=n.groupper)}for(var s=0,o=Object.keys(Me);s<o.length;s++){var a=o[s];if(!i[a]){var u=Me[a];u.setFocused(!1),u.setUnlimited(!1),t&&u.forceUpdate()}}for(var c=0,l=Object.keys(i);c<l.length;c++){var h=l[c];if(!Me[h]){var d=i[h],f=d.getElement();d.setFocused(!0),e!==this._getGroupFirst(f,!1)&&d.setUnlimited(!0)}}Me=i},t._getGroupFirst=function(e,t){return this._ah.focusable.isFocusable(e)?e:this._ah.focusable.findFirst(e,!1,!1,t)},t.addGroupper=function(e,t,i){var r=I(this._ah,e);if(r&&r.groupper)throw new Error("The element already has a focus group");C(e,{groupper:new Be(this._ah,e,this._win,t,i)})},t.removeGroupper=function(e){var t=I(this._ah,e),i=t&&t.groupper;i&&(i.dispose(),C(e,{groupper:i,removed:!0}))},t.moveGroupper=function(e,t){if(e!==t){var i=I(this._ah,e),r=i&&i.groupper;r&&(r.moveTo(t),C(e,{groupper:r,removed:!0}),C(t,{groupper:r}))}},t.setGroupperProps=function(e,t,i){var r=this._findGroupper(e);r&&r.setProps(t,i)},t.setCurrentGroupper=function(e,t){var i=e?this._findGroupper(e):null;if(null===e)for(var r=0,n=Object.keys(Se);r<n.length;r++){var s=n[r],o=Se[s];o.setCurrent(!1),t&&o.forceUpdate()}else for(;i;){i.setCurrent(!0),t&&i.forceUpdate();var a=i.getElement().parentElement;i=a?this._findGroupper(a):null}},t.isInCurrentGroupper=function(e){return this._isInCurrentGroupper(e,!1)},t._isInCurrentGroupper=function(e,t){var i=this._findGroupper(e);if(i){var r=i.getElement(),n=!1;for(t&&(n=e.contains(this._getGroupFirst(r,!0)));i;){var s=i.getState();if(!1===s.isCurrent)return!1;if(t&&s.isLimited&&!n)return!1;var o=r.parentElement;(i=o?this._findGroupper(o):null)&&(r=i.getElement())}return!0}},t._findGroupper=function(e){for(var t=e;t;t=t.parentElement){var i=I(this._ah,t);if(i&&i.groupper)return i.groupper}return null},t.findGroupper=function(e){var t=this._findGroupper(e);return t?t.getElement():null},t._findNextGroupper=function(e,t,i){var r=this.findGroupper(e),n=r&&r.parentElement;if(r&&n){var s=I(this._ah,n),o=s&&s.uberGroupper;if(o)for(var a=t(o,r);a;a=t(o,r,a)){var u=I(this._ah,a);if(u&&u.groupper&&(i||this.isAccessible(a))){if(!this._ah.focusable.isFocusable(a)&&!this._ah.focusable.findFirst(a,!1,!1,!0))continue;return a}}}return null},t.findFirstGroupper=function(e,t){return this._findNextGroupper(e,function(e,t,i){return void 0===i?e.getElement().firstElementChild:i?i.nextElementSibling:null},t)},t.findLastGroupper=function(e,t){return this._findNextGroupper(e,function(e,t,i){return void 0===i?e.getElement().lastElementChild:i?i.previousElementSibling:null},t)},t.findNextGroupper=function(e,t){return this._findNextGroupper(e,function(e,t,i){return void 0===i?t.nextElementSibling:i?i.nextElementSibling:null},t)},t.findPrevGroupper=function(e,t){return this._findNextGroupper(e,function(e,t,i){return void 0===i?t.previousElementSibling:i?i.previousElementSibling:null},t)},t.getProps=function(e){var t=I(this._ah,e);return t&&t.focusable||{}},t.setProps=function(e,t){var i=I(this._ah,e),r=i&&i.focusable||{},n={};if(t)for(var s=0,o=Object.keys(t);s<o.length;s++){var a=o[s],u=t[a];u?n[a]=u:void 0===u&&r[a]&&(n[a]=r[a])}r.isDefault===n.isDefault&&r.isIgnored===n.isIgnored||k(this._ah,e,{focusable:n})},t.isFocusable=function(e,t,i,r){return!(!F(e,Ge)||!t&&-1===e.tabIndex)&&((i||this.isVisible(e))&&(r||this.isAccessible(e)))},t.isVisible=function(e){if(!e.ownerDocument)return!1;if(null===e.offsetParent&&e.ownerDocument.body!==e)return!1;var t=e.ownerDocument.defaultView;if(!t)return!1;var i=e.ownerDocument.body.getBoundingClientRect();return(0!==i.width||0!==i.height)&&"hidden"!==t.getComputedStyle(e).visibility},t.isAccessible=function(e){for(var t=e;t;t=t.parentElement){var i=I(this._ah,t);if(i&&i.modalizer&&!i.modalizer.isActive())return!0;var r=t.getAttribute("aria-hidden");if(r&&"true"===r.toLowerCase())return!1;if((r=t.getAttribute("aria-disabled"))&&"true"===r.toLowerCase())return!1}return!0},t.findFirst=function(e,t,i,r){return this._findElement(e||this._getBody(),null,t,i,r,!1)},t.findLast=function(e,t,i,r){return this._findElement(e||this._getBody(),null,t,i,r,!0)},t.findNext=function(e,t,i,r,n){return this._findElement(t||this._getBody(),e,i,r,n,!1)},t.findPrev=function(e,t,i,r,n){return this._findElement(t||this._getBody(),e,i,r,n,!0)},t.findDefault=function(e,t,i,r){var n=this;return this._findElement(e||this._getBody(),null,t,i,r,!1,function(e){return n._ah.focusable.isFocusable(e,t)&&!!n.getProps(e).isDefault})},t._findElement=function(e,t,i,r,n,s,o){var a=this;if(!e)return null;if(!e.ownerDocument||t&&e!==t&&!e.contains(t))return null;o||(o=function(e){return a._ah.focusable.isFocusable(e,i)});var u=l(e.ownerDocument,e,function(e){return a._acceptElement(e,o,r,n)});if(!u)return null;if(t)u.currentNode=t;else if(s){for(var c=null,h=e.lastElementChild;h;h=h.lastElementChild)c=h;if(!c)return null;if(this._acceptElement(c,o,r,n)===NodeFilter.FILTER_ACCEPT)return c;u.currentNode=c}return s?u.previousNode():u.nextNode()},t._acceptElement=function(e,t,i,r){var n=ce.findRootAndModalizer(this._ah,e),s=n&&n.root.getCurrentModalizerId();return i||!n||!n.modalizer||void 0===s||s===n.modalizer.userId||n.modalizer.getBasicProps().isAlwaysAccessible?r||!1!==this._isInCurrentGroupper(e,!0)?t(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT:n?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},e}(),Ke=["input","textarea","*[contenteditable]"].join(", "),We=function(e){function t(i,r){var n;return n=e.call(this)||this,n._canOverrideNativeFocus=!1,n._init=function(){n._initTimer=void 0;var e=n._win();n._canOverrideNativeFocus=L(e),t.replaceFocus(e),e.document.addEventListener("focusin",n._onFocusIn,!0),e.document.addEventListener("focusout",n._onFocusOut,!0),e.document.addEventListener("mousedown",n._onMouseDown,!0),e.addEventListener("keydown",n._onKeyDown)},n._onFocusIn=function(e){n._setFocusedElement(e.target,e.relatedTarget||void 0)},n._onFocusOut=function(e){n._setFocusedElement(void 0,e.relatedTarget||void 0)},n._onMouseDown=function(e){var t=n._ah.focusable.findGroupper(e.target);t&&n._ah.focusable.setCurrentGroupper(t)},n._onKeyDown=function(e){var t=n.getVal();if(t&&t.ownerDocument){switch(e.keyCode){case ee.Enter:case ee.Esc:case ee.Tab:case ee.Down:case ee.Right:case ee.Up:case ee.Left:case ee.PageDown:case ee.PageUp:case ee.Home:case ee.End:break;default:return}if(e.keyCode===ee.Tab){var i=ce.findRootAndModalizer(n._ah,t);if(!i&&!n._ah.focusable.isInCurrentGroupper(t))return;if(i&&i.modalizer){var r=i.root.getCurrentModalizerId();r&&r!==i.modalizer.userId&&(i.modalizer=i.root.getModalizerById(r),i.modalizer&&(t=i.modalizer.getElement()))}var s=e.shiftKey?n._ah.focusable.findPrev(t):n._ah.focusable.findNext(t),o=n._getGroupper(t);if(o){var a=o.getElement(),u=n._getFirstInGroupper(a,!1);if(!u||t===u||o.getBasicProps().isLimited!==H.LimitedTrapFocus||s&&s!==u&&a.contains(s)){if(t===u&&a.parentElement){var c=n._getGroupper(a.parentElement);c&&!c.getElement().contains(s)&&c.getBasicProps().isLimited===H.LimitedTrapFocus&&(s=t)}}else s=e.shiftKey?n._ah.focusable.findLast(a):n._ah.focusable.findNext(u,a)}if(i&&i.modalizer){var l=s&&ce.findRootAndModalizer(n._ah,s);if((!l||i.root.uid!==l.root.uid||!l.modalizer||l.root.getCurrentModalizerId()!==l.modalizer.userId)&&i.modalizer.onBeforeFocusOut())return void e.preventDefault()}s?(e.preventDefault(),g(s)):i&&i.root.moveOutWithDefaultAction(e.shiftKey)}else{if((e.keyCode===ee.Left||e.keyCode===ee.Right)&&n._isInput(t))return;var h=n._getGroupper(t);if(!h)return;var d=h.getElement(),f=!0,_=null;switch(e.keyCode){case ee.Enter:case ee.Esc:var v=h.getState();if(e.keyCode===ee.Enter)v.isLimited&&t===n._getFirstInGroupper(d,!0)?(h.setUnlimited(!0),_=n._ah.focusable.findNext(t),d.contains(_)||(_=null),null===_&&(f=!1)):f=!1;else{if(v.isLimited&&d.parentElement){var m=n._getGroupper(d.parentElement);m&&(d=m.getElement(),h=m,v=m.getState())}v.isLimited||(h.setUnlimited(!1),_=d)}break;case ee.Down:case ee.Right:case ee.Up:case ee.Left:_=n._findNextGroupper(d,e.keyCode,h.getBasicProps().nextDirection);break;case ee.PageDown:(_=n._findPageDownGroupper(d))&&p(_,!0);break;case ee.PageUp:(_=n._findPageUpGroupper(d))&&p(_,!1);break;case ee.Home:d.parentElement&&(_=n._ah.focusable.findFirstGroupper(d));break;case ee.End:d.parentElement&&(_=n._ah.focusable.findLastGroupper(d))}f&&(e.preventDefault(),e.stopImmediatePropagation()),_&&(n._ah.focusable.isFocusable(_)||(_=n._ah.focusable.findFirst(_,!1,!1,!0)),_&&(n._ah.focusable.setCurrentGroupper(_),se.setVal(n._ah.keyboardNavigation,!0),g(_)))}}},n._validateFocusedElement=function(e,t){var i=ce.findRootAndModalizer(n._ah,e),r=i?i.root.getCurrentModalizerId():void 0;if(n._ah.focusable.setCurrentGroupper(e),i&&i.modalizer){var s=i.modalizer;if(r!==s.userId)if(void 0===r||t.isFocusedProgrammatically)i.root.setCurrentModalizerId(s.userId);else if(s&&e.ownerDocument){var o=n._ah.focusable.findFirst(i.root.getElement());if(o){if(e.compareDocumentPosition(o)&document.DOCUMENT_POSITION_PRECEDING&&!(o=n._ah.focusable.findLast(e.ownerDocument.body)))throw new Error("Something went wrong.");n._ah.focusedElement.focus(o)}else e.blur()}}},n._ah=i,n._win=r,n._initTimer=r().setTimeout(n._init,0),n}o(t,e);var i=t.prototype;return i.dispose=function(){e.prototype.dispose.call(this);var i=this._win();t.restoreFocus(i),this._initTimer&&(i.clearTimeout(this._initTimer),this._initTimer=void 0),i.document.removeEventListener("focusin",this._onFocusIn,!0),i.document.removeEventListener("focusout",this._onFocusOut,!0),i.document.removeEventListener("mousedown",this._onMouseDown,!0),i.removeEventListener("keydown",this._onKeyDown),delete t._lastFocusedProgrammatically,delete t._lastResetElement,delete this._nextVal,delete this._lastVal},t.dispose=function(e){e.dispose()},i.getFocusedElement=function(){return this.getVal()},i.getLastFocusedElement=function(){return this._lastVal&&!T(this._lastVal.ownerDocument,this._lastVal)&&(this._lastVal=void 0),this._lastVal},i.focus=function(e,i,r){return!!this._ah.focusable.isFocusable(e,i,!1,r)&&(t._lastFocusedProgrammatically=e,e.focus(),!0)},i.focusDefault=function(e){var t=this._ah.focusable.findDefault(e);return!!t&&(this._ah.focusedElement.focus(t),!0)},i.focusFirst=function(e){var t=this._ah.focusable.findFirst(e,!1,!0);return!!t&&(this.focus(t),!0)},i.resetFocus=function(e){if(!this._ah.focusable.isVisible(e))return!1;if(this._ah.focusable.isFocusable(e,!0,!0,!0))this.focus(e);else{var i=e.getAttribute("tabindex"),r=e.getAttribute("aria-hidden");e.tabIndex=-1,e.setAttribute("aria-hidden","true"),t._lastResetElement=e,this.focus(e,!0,!0),this._setOrRemoveAttribute(e,"tabindex",i),this._setOrRemoveAttribute(e,"aria-hidden",r)}return!0},i._setOrRemoveAttribute=function(e,t,i){null===i?e.removeAttribute(t):e.setAttribute(t,i)},i._setFocusedElement=function(e,i){var r={relatedTarget:i};if(e){var n=t._lastResetElement;if(t._lastResetElement=void 0,n===e||m(e))return;(this._canOverrideNativeFocus||t._lastFocusedProgrammatically)&&(r.isFocusedProgrammatically=e===t._lastFocusedProgrammatically,t._lastFocusedProgrammatically=void 0)}var s=this._nextVal={element:e,details:r};e&&e!==this._val&&this._validateFocusedElement(e,r),this._nextVal===s&&this.setVal(e,r),this._nextVal=void 0},i.setVal=function(t,i){e.prototype.setVal.call(this,t,i),t&&(this._lastVal=t)},t.replaceFocus=function(e){function i(){return t._lastFocusedProgrammatically=this,r.apply(this,arguments)}var r=e.HTMLElement.prototype.focus;r.__ahFocus||(e.HTMLElement.prototype.focus=i,i.__ahFocus=r)},t.restoreFocus=function(e){var t=e.HTMLElement.prototype,i=t.focus.__ahFocus;i&&(t.focus=i)},i._getFirstInGroupper=function(e,t){return this._ah.focusable.isFocusable(e)?e:this._ah.focusable.findFirst(e,!1,!1,t)},i._getGroupper=function(e){var t=this._ah.focusable.findGroupper(e);if(t){var i=I(this._ah,t);return i&&i.groupper}},i._findNextGroupper=function(e,t,i){if(i===K.Vertical&&(t===ee.Left||t===ee.Right))return null;if(i===K.Horizontal&&(t===ee.Up||t===ee.Down))return null;if(void 0===i||i===K.Both)return t===ee.Left||t===ee.Up?this._ah.focusable.findPrevGroupper(e):this._ah.focusable.findNextGroupper(e);for(var r,n,s,o=e.getBoundingClientRect(),a=t===ee.Down||t===ee.Right?"findNextGroupper":"findPrevGroupper",u=this._ah.focusable[a](e);u;u=this._ah.focusable[a](u)){var c=u.getBoundingClientRect();if(t===ee.Up){if(c.top<o.top){if(void 0===s)s=c.top;else if(c.top<s)break;if(c.left<o.left){r||(r=u);break}r=u}}else if(t===ee.Down){if(c.top>o.top){if(void 0===s)s=c.top;else if(c.top>s)break;if(c.left>o.left){r||(r=u);break}r=u}}else if(t===ee.Left||t===ee.Right){r=u;break}n=u}return r||n||null},i._findPageUpGroupper=function(e){for(var t=this._ah.focusable.findPrevGroupper(e),i=null;t;)i=t,t=d(t)?this._ah.focusable.findPrevGroupper(t):null;return i},i._findPageDownGroupper=function(e){for(var t=this._ah.focusable.findNextGroupper(e),i=null;t;)i=t,t=d(t)?this._ah.focusable.findNextGroupper(t):null;return i},i._isInput=function(e){return F(e,Ke)},t}(ne),qe=0,Je=function(){function e(e,t,i,r,n){this._isAccessible=!0,this._isFocused=!1,this._ah=t,this._win=i,this.internalId="ml"+ ++qe,this.userId=r.id,this._element=e,this._basic=r,this._extended=n||{},this._setAccessibilityProps()}var t=e.prototype;return t.setProps=function(e,t){e?(e.id&&(this.userId=e.id),this._basic=s({},this._basic,e)):null===e&&(this._basic={id:this.userId}),t?this._extended=s({},this._extended,t):null===t&&(this._extended={}),this._setAccessibilityProps()},t.dispose=function(){this._setAccessibleTimer&&(this._win().clearTimeout(this._setAccessibleTimer),this._setAccessibleTimer=void 0),this._isFocused&&this.setFocused(!1),this._remove(),this._extended={}},t.move=function(e){this._remove(),this._element=e,this._setAccessibilityProps(),this._isAccessible=!this._isAccessible,this._isActive=!this._isActive,this.setAccessible(!this._isAccessible),this.setActive(!this._isActive)},t.setAccessible=function(e){var t=this;e!==this._isAccessible&&(this._isAccessible=e,this._setAccessibleTimer&&(this._win().clearTimeout(this._setAccessibleTimer),this._setAccessibleTimer=void 0),e?D(this._ah,this._element,"aria-hidden"):this._setAccessibleTimer=this._win().setTimeout(function(){t._setAccessibleTimer=void 0,D(t._ah,t._element,"aria-hidden","true")},0))},t.setActive=function(e){e!==this._isActive&&(this._isActive=e)},t.isActive=function(){return!!this._isActive},t.getElement=function(){return this._element},t.setFocused=function(e){this._isFocused!==e&&(this._isFocused=e,e?this._extended.onFocusIn&&this._extended.onFocusIn():this._extended.onFocusOut&&this._extended.onFocusOut(!1))},t.onBeforeFocusOut=function(){return!!this._extended.onFocusOut&&this._extended.onFocusOut(!0)},t.getBasicProps=function(){return this._basic},t.getExtendedProps=function(){return this._extended},t._remove=function(){},t._setAccessibilityProps=function(){},e}(),Ye=function(){function e(e,t){var i=this;this._init=function(){i._initTimer=void 0,i._ah.focusedElement.subscribe(i._onFocus)},this._onFocus=function(e){i._focusOutTimer&&(i._win().clearTimeout(i._focusOutTimer),i._focusOutTimer=void 0);var t;if(e){var r=ce.findRootAndModalizer(i._ah,e);r&&(t=r.modalizer)}t?(i._curModalizer&&t!==i._curModalizer&&i._curModalizer.setFocused(!1),i._curModalizer=t,i._curModalizer.setFocused(!0)):i._curModalizer&&(i._focusOutTimer=i._win().setTimeout(function(){i._focusOutTimer=void 0,i._curModalizer&&(i._curModalizer.setFocused(!1),i._curModalizer=void 0)},0))},this._ah=e,this._win=t,this._initTimer=t().setTimeout(this._init,0)}var t=e.prototype;return t.dispose=function(){var e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),this._focusOutTimer&&(e.clearTimeout(this._focusOutTimer),this._focusOutTimer=void 0),this._ah.focusedElement.unsubscribe(this._onFocus),delete this._curModalizer},e.dispose=function(e){e.dispose()},t.add=function(e,t,i){var r=I(this._ah,e);if(!r||!r.modalizer){var n=new Je(e,this._ah,this._win,t,i);k(this._ah,e,{modalizer:n}),C(e,{modalizer:n})}},t.setProps=function(e,t,i){var r=I(this._ah,e);r&&r.modalizer&&r.modalizer.setProps(t,i)},t.remove=function(e){var t=I(this._ah,e),i=t&&t.modalizer;i&&(k(this._ah,e,{modalizer:void 0}),C(e,{modalizer:i,removed:!0}),i.dispose())},t.move=function(e,t){var i=I(this._ah,e),r=i&&i.modalizer;r&&(r.move(t),k(this._ah,t,{modalizer:r}),k(this._ah,e,{modalizer:void 0}),C(e,{modalizer:r,removed:!0}),C(t,{modalizer:r}))},t.focus=function(e,t,i){var r=ce.findRootAndModalizer(this._ah,e);if(r&&r.modalizer){r.root.setCurrentModalizerId(r.modalizer.userId);var n=r.modalizer.getBasicProps(),s=r.modalizer.getElement();if(void 0===t&&(t=n.isNoFocusFirst),!t&&this._ah.keyboardNavigation.isNavigatingWithKeyboard()&&this._ah.focusedElement.focusFirst(s))return!0;if(void 0===i&&(i=n.isNoFocusDefault),!i&&this._ah.focusedElement.focusDefault(s))return!0;this._ah.focusedElement.resetFocus(s)}return!1},e}(),Xe={},$e={},Qe=function(e){function t(t,i){var r;return r=e.call(this)||this,r._waiting={},r._lastRequestFocusId=0,r._init=function(){r._initTimer=void 0,r._win().document.addEventListener(oe,r._onMutation,!0)},r._onMutation=function(e){e.target&&e.details.observed&&r._onObservedElementUpdate(e.details.observed)},r._ah=t,r._win=i,r._initTimer=i().setTimeout(r._init,0),r}o(t,e);var i=t.prototype;return i.dispose=function(){var e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),e.document.removeEventListener(oe,this._onMutation,!0);for(var t=0,i=Object.keys(this._waiting);t<i.length;t++){var r=i[t],n=this._waiting[r];n.timer&&e.clearTimeout(n.timer),n.reject&&n.reject(),delete this._waiting[r]}},t.dispose=function(e){e.dispose()},i.add=function(e,t,i){var r=I(this._ah,e);r&&r.observed||(k(this._ah,e,{observed:s({},t,i)}),this._onObservedElementUpdate(e))},i.remove=function(e){var t=I(this._ah,e);t&&t.observed&&(k(this._ah,e,{observed:void 0}),this._onObservedElementUpdate(e))},i.move=function(e,t){var i=I(this._ah,e),r=I(this._ah,t),n=i&&i.observed;if(n){if(k(this._ah,e,{observed:void 0}),this._onObservedElementUpdate(e),r&&r.observed)return;k(this._ah,t,{observed:n}),this._onObservedElementUpdate(t)}},i.setProps=function(e,t,i){var r=I(this._ah,e),n=r&&r.observed;n&&(k(this._ah,e,{observed:s({},n,t,i)}),this._onObservedElementUpdate(e))},i.getElement=function(e){var t=$e[e];if(t)for(var i=0,r=Object.keys(t);i<r.length;i++)return t[r[i]].element;return null},i.waitElement=function(e,t){var i=this,r=this.getElement(e);if(r)return Promise.resolve(r);var n=this._waiting[e];if(n&&n.promise)return n.promise;n=this._waiting[e]={timer:this._win().setTimeout(function(){n.timer=void 0,delete i._waiting[e],n.resolve&&n.resolve(null)},t)};var s=new Promise(function(e,t){n.resolve=e,n.reject=t});return n.promise=s,s},i.requestFocus=function(){var e=n(R.mark(function e(t,i){var r,n=this;return R.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=++this._lastRequestFocusId,e.abrupt("return",this.waitElement(t,i).then(function(e){return!(n._lastRequestFocusId!==r||!e)&&n._ah.focusedElement.focus(e)}));case 2:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),i._onObservedElementUpdate=function(e){var t=I(this._ah,e),i=t&&t.observed,r=y(e,this._win()),n=T(e.ownerDocument,e),s=Xe[r];if(i&&n){if(s||(s=Xe[r]={element:e}),i.name&&i.name!==s.triggeredName){if(s.triggeredName){var o=$e[s.triggeredName];o&&o[r]&&(Object.keys(o).length>1?delete o[r]:delete $e[s.triggeredName])}s.triggeredName=i.name;var a=$e[s.triggeredName];a||(a=$e[s.triggeredName]={}),a[r]=s,this._trigger(e,{name:i.name,details:i.details})}}else if(s){if(s.triggeredName){var u=$e[s.triggeredName];u&&u[r]&&(Object.keys(u).length>1?delete u[r]:delete $e[s.triggeredName])}delete Xe[r]}},i._trigger=function(e,t){this.trigger(e,t);var i=t.name,r=i&&this._waiting[i];r&&(r.timer&&this._win().clearTimeout(r.timer),delete this._waiting[i],r.resolve&&r.resolve(e))},t}(ne),Ze={areaClass:"ah-focus-outline-area",outlineClass:"ah-focus-outline",outlineColor:"#ff4500",outlineWidth:2,zIndex:2147483647},et=Ze;"undefined"!=typeof document&&("onfullscreenchange"in document?(Ve="fullscreenchange",je="fullscreenElement"):"onwebkitfullscreenchange"in document?(Ve="webkitfullscreenchange",je="webkitFullscreenElement"):"onmozfullscreenchange"in document?(Ve="mozfullscreenchange",je="mozFullScreenElement"):"onmsfullscreenchange"in document&&(Ve="msfullscreenchange",je="msFullscreenElement"));var tt=function(){function e(e,t,i,r){this.left=e,this.top=t,this.right=i,this.bottom=r}var t=e.prototype;return t.equalsTo=function(e){return this.left===e.left&&this.top===e.top&&this.right===e.right&&this.bottom===e.bottom},t.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e}(),it=function(){function e(t,i){var r=this;this._isVisible=!1,this._allOutlineElements=[],this._init=function(){r._initTimer=void 0,r._ah.keyboardNavigation.subscribe(r._onKeyboardNavigationStateChanged),r._ah.focusedElement.subscribe(r._onFocus);var e=r._win();e.addEventListener("scroll",r._onScroll,!0),Ve&&e.document.addEventListener(Ve,r._onFullScreenChanged)},this._onFullScreenChanged=function(e){if(je&&e.target){var t=e.target.body||e.target,i=r._getDOM(t);if(t.ownerDocument&&i){var n=t.ownerDocument[je];n?(n.appendChild(i.container),r._fullScreenElement=n):(t.ownerDocument.body.appendChild(i.container),r._fullScreenElement=void 0)}}},this._onKeyboardNavigationStateChanged=function(){r._onFocus(r._ah.focusedElement.getFocusedElement())},this._onFocus=function(e){!r._updateElement(e)&&r._isVisible&&r._setVisibility(!1)},this._onScroll=function(t){r._outlinedElement&&e._isParentChild(t.target,r._outlinedElement)&&(r._curPos=void 0,r._setOutlinePosition())},this._ah=t,this._win=i,i().setTimeout(this._init,0)}var t=e.prototype;return t.setup=function(e){et=s({},et,e);var t=this._win();t.__ahOutline||(t.__ahOutline={}),t.__ahOutline.style||(t.__ahOutline.style=A(t.document,et)),e&&e.areaClass?t.document.body.classList.remove(Ze.areaClass):t.document.body.classList.add(Ze.areaClass)},t.setProps=function(e,t){var i=I(this._ah,e),r=i&&i.outline||{},n={};if(t)for(var s=0,o=Object.keys(t);s<o.length;s++){var a=o[s],u=t[a];u?n[a]=u:void 0===u&&r[a]&&(n[a]=r[a])}n.isIgnored!==r.isIgnored&&k(this._ah,e,{outline:n})},t.dispose=function(){var e=this,t=this._win();this._initTimer&&(t.clearTimeout(this._initTimer),this._initTimer=void 0),this._updateTimer&&(t.clearTimeout(this._updateTimer),this._updateTimer=void 0),this._ah.keyboardNavigation.unsubscribe(this._onKeyboardNavigationStateChanged),this._ah.focusedElement.unsubscribe(this._onFocus),t.removeEventListener("scroll",this._onScroll,!0),Ve&&t.document.removeEventListener(Ve,this._onFullScreenChanged),this._allOutlineElements.forEach(function(t){return e._removeDOM(t.container)}),this._allOutlineElements=[],delete this._outlinedElement,delete this._curPos,delete this._curOutlineElements,delete this._fullScreenElement},e.dispose=function(e){e.dispose()},t._shouldShowCustomOutline=function(e){var t=I(this._ah,e);if(t&&t.outline&&t.outline.isIgnored)return!1;for(var i=e;i;i=i.parentElement)if(i.classList&&i.classList.contains(et.areaClass))return!0;return!1},t._updateElement=function(e){if(this._outlinedElement=void 0,this._updateTimer&&(this._win().clearTimeout(this._updateTimer),this._updateTimer=void 0),this._curPos=void 0,!this._ah.keyboardNavigation.isNavigatingWithKeyboard())return!1;if(e){if("INPUT"===e.tagName){if(!(e.type in{button:!0,checkbox:!0,file:!0,image:!0,radio:!0,range:!0,reset:!0,submit:!0}))return!1}else if("TEXTAREA"===e.tagName||"true"===e.contentEditable||"IFRAME"===e.tagName)return!1;return!!this._shouldShowCustomOutline(e)&&(this._ah.keyboardNavigation.isNavigatingWithKeyboard()&&(this._outlinedElement=e,this._updateOutline()),!0)}return!1},t._updateOutline=function(){var e=this;this._setOutlinePosition(),this._updateTimer&&(this._win().clearTimeout(this._updateTimer),this._updateTimer=void 0),this._outlinedElement&&(this._updateTimer=this._win().setTimeout(function(){e._updateTimer=void 0,e._updateOutline()},30))},t._setVisibility=function(e){this._isVisible=e,this._curOutlineElements&&(e?this._curOutlineElements.container.classList.add(et.outlineClass+"_visible"):(this._curOutlineElements.container.classList.remove(et.outlineClass+"_visible"),this._curPos=void 0))},t._setOutlinePosition=function(){if(this._outlinedElement){var e=h(this._outlinedElement),t=new tt(e.left,e.top,e.right,e.bottom);if(!this._curPos||!t.equalsTo(this._curPos)){var i=this._getDOM(this._outlinedElement),r=this._outlinedElement.ownerDocument&&this._outlinedElement.ownerDocument.defaultView;if(i&&r){this._curOutlineElements!==i&&(this._setVisibility(!1),this._curOutlineElements=i),this._curPos=t;var n=t.clone(),s=!1,o=!1,a=i.container,u=a&&a.ownerDocument&&a.ownerDocument.scrollingElement;if(u){for(var c=this._outlinedElement.parentElement;c&&c!==this._fullScreenElement;c=c.parentElement){e=h(c);var l=c.ownerDocument&&c.ownerDocument.defaultView;if(!l)return;var d=l.getComputedStyle(c),f=d.position;"absolute"===f?s=!0:"fixed"!==f&&"sticky"!==f||(o=!0),"visible"!==d.overflow&&((s||o)&&"hidden"!==d.overflow||(e.left>n.left&&(n.left=e.left),e.top>n.top&&(n.top=e.top),e.right<n.right&&(n.right=e.right),e.bottom<n.bottom&&(n.bottom=e.bottom)))}var p=h(u),_=p.left+p.right,v=p.top+p.bottom,m=et.outlineWidth;n.left=n.left>m?n.left-m:0,n.top=n.top>m?n.top-m:0,n.right=n.right<_-m?n.right+m:_,n.bottom=n.bottom<v-m?n.bottom+m:v;var g=n.right-n.left,b=n.bottom-n.top;if(g>2*m&&b>2*m){var y=i.left,w=i.top,E=i.right,T=i.bottom,F=this._fullScreenElement||o?0:r.pageXOffset,k=this._fullScreenElement||o?0:r.pageYOffset;a.style.position=o?"fixed":"absolute",a.style.background=et.outlineColor,y.style.width=E.style.width=w.style.height=T.style.height=et.outlineWidth+"px",y.style.left=w.style.left=T.style.left=n.left+F+"px",E.style.left=n.left+F+g-m+"px",y.style.top=E.style.top=w.style.top=n.top+k+"px",T.style.top=n.top+k+b-m+"px",y.style.height=E.style.height=b+"px",w.style.width=T.style.width=g+"px",this._setVisibility(!0)}else this._setVisibility(!1)}}}}},t._getDOM=function(e){var t=e.ownerDocument,i=t&&t.defaultView;if(t&&i&&i.__ahOutline){if(i.__ahOutline.style||(i.__ahOutline.style=A(t,et)),!i.__ahOutline.elements){var r={container:t.createElement("div"),left:t.createElement("div"),top:t.createElement("div"),right:t.createElement("div"),bottom:t.createElement("div")};r.container.className=et.outlineClass,r.left.className=et.outlineClass+"__left",r.top.className=et.outlineClass+"__top",r.right.className=et.outlineClass+"__right",r.bottom.className=et.outlineClass+"__bottom",r.container.appendChild(r.left),r.container.appendChild(r.top),r.container.appendChild(r.right),r.container.appendChild(r.bottom),t.body.appendChild(r.container),i.__ahOutline.elements=r,this._allOutlineElements.push(r)}return i.__ahOutline.elements}},t._removeDOM=function(e){var t=e.ownerDocument&&e.ownerDocument.defaultView,i=t&&t.__ahOutline;if(i){i.style&&i.style.parentNode&&(i.style.parentNode.removeChild(i.style),delete i.style);var r=i&&i.elements;r&&(r.container.parentNode&&r.container.parentNode.removeChild(r.container),delete i.elements)}},e._isParentChild=function(e,t){return t===e||!!(e.compareDocumentPosition(t)&document.DOCUMENT_POSITION_CONTAINED_BY)},e}(),rt=function(){function e(e){var t=this;this.getWindow=function(){if(!t._win)throw new Error("Using disposed AbilityHelpers.");return t._win},this._storage={},this._win=e,e&&e.document&&(this._unobserve=O(e.document,this,x));var i=this.getWindow;this.keyboardNavigation=new se(this,i),this.focusedElement=new We(this,i),this.outline=new it(this,i),this.deloser=new ve(this,i),this.focusable=new He(this,i),this.modalizer=new Ye(this,i),this.root=new ce(this,i,function(){He.forgetFocusedGrouppers(t.focusable)}),this.observedElement=new Qe(this,i),this.crossOrigin=new Ae(this,i)}var t=e.prototype;return t.dispose=function(){this._unobserve&&(this._unobserve(),delete this._unobserve),it.dispose(this.outline),ve.dispose(this.deloser),He.dispose(this.focusable),Ye.dispose(this.modalizer),ce.dispose(this.root),Qe.dispose(this.observedElement),Ae.dispose(this.crossOrigin),se.dispose(this.keyboardNavigation),We.dispose(this.focusedElement),E(),this._storage={},delete this._win},e.dispose=function(e){e.dispose()},t.storageEntry=function(e,t){var i=this._storage[e];return i?!1===t&&0===Object.keys(i).length&&delete this._storage[e]:!0===t&&(i=this._storage[e]={}),i},e}()}},[2710]);