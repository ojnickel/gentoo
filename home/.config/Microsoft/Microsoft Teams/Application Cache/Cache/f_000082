(window.webPackBridgeJsonp=window.webPackBridgeJsonp||[]).push([[51],{"348426a60b7cb4dbeb31":function(e,t,i){"use strict";var n=i("11e808f62b4fe6e70870"),a=i("8d96f6a4786b316c0d53"),r=i("5f0dbee501b8046e840c"),o=i("2118c0654cdae82c146d"),s=i("94a755535d135f12850c"),l=i("56e93fab5efcffbf24fb"),c=i("e0ae79cd8630f9b39623"),u=function(){function e(e){var t=this;this.telemetrySettings=null,this.disableColumnBlocker=!1,this.fixedColumnRules={},this.blockedColumnRules={},this.columnBlockingRules={},this.wildCardMergedTables={},this.wildCardTableEmpty=!0,this.updateColumnBlockingSettings=function(e){if(e){if(t.telemetrySettings=e,t.disableColumnBlocker=e.disableColumnBlocker||!1,t.disableColumnBlocker)return t.columnBlockingRules={},t.wildCardMergedTables={},void(t.wildCardTableEmpty=!0);var i={};e.blockedColumnRules&&(i=e.blockedColumnRules),t.blockedColumnRules=i;var n={};e.fixedColumnRules&&(n=e.fixedColumnRules),t.fixedColumnRules=n,t.generateRuleSet()}},e.getObservable(l.a.Telemetry).subscribe(this.updateColumnBlockingSettings),this.telemetrySettings=e.get(l.a.Telemetry),this.updateColumnBlockingSettings(this.telemetrySettings)}return e.prototype.applyColumnBlockingRules=function(e,t,i,n){try{if(this.wildCardTableEmpty||this.wildCardMergedTables[e]||(this.columnBlockingRules[e]=Object(s.merge)(this.columnBlockingRules[e],this.columnBlockingRules["*"]),this.wildCardMergedTables[e]=!0),Object(s.isEmpty)(this.columnBlockingRules[e]))return;Object(s.isEmpty)(this.columnBlockingRules[e][t])?Object(s.isEmpty)(this.columnBlockingRules[e]["*"])||this.blockEventPropertyColumn(this.columnBlockingRules[e]["*"],i,n):this.blockEventPropertyColumn(this.columnBlockingRules[e][t],i,n)}catch(e){return void i.setProperty("diagBlockedColumns",Object(c.a)({parseFailed:!0}))}},e.prototype.blockEventPropertyColumn=function(e,t,i){var n=t.properties,a={},r=null==i?void 0:i.packedData;Object(s.forEach)(e,function(e,t){Object(s.isEmpty)(n[t])||(n[t].value="",a[t]=e),r&&r.forEach(function(i){i[t]&&(i[t]=void 0,a[t]=e)})}),Object(s.isEmpty)(a)||t.setProperty("diagBlockedColumns",Object(c.a)(a))},e.prototype.generateRuleSet=function(){var e=this;try{this.columnBlockingRules={},this.wildCardMergedTables={};var t=this.blockedColumnRules["*"],i=this.fixedColumnRules["*"];Object(s.forEach)(this.blockedColumnRules,function(n,a){if(!Object(s.isEmpty)(n)){Object(s.isEmpty)(t)||"*"===a||(n=Object(s.merge)(n,t)),!Object(s.isEmpty)(e.fixedColumnRules)&&!Object(s.isEmpty)(e.fixedColumnRules[a])&&!Object(s.isEmpty)(i)&&"*"!==a&&(e.fixedColumnRules[a]=Object(s.merge)(e.fixedColumnRules[a],i)),e.columnBlockingRules[a]={};var r={};Object(s.isEmpty)(n["*"])||e.mergeBlockedColumnsRulesForAllEventType(n,a,r),Object(s.isEmpty)(r)||(e.columnBlockingRules[a]["*"]=r),e.mergeBlockedColumnsRulesForEveryEventType(n,a,r),Object(s.isEmpty)(e.columnBlockingRules[a])?delete e.columnBlockingRules[a]:e.wildCardMergedTables[a]=!0}}),this.wildCardTableEmpty=Object(s.isEmpty)(this.columnBlockingRules["*"])}catch(e){return}},e.prototype.mergeBlockedColumnsRulesForAllEventType=function(e,t,i){var n=this;Object(s.forEach)(e["*"],function(e,a){e>(n.fixedColumnRules[t]&&n.fixedColumnRules[t]["*"]&&n.fixedColumnRules[t]["*"][a]||0)&&(i[a]=e)})},e.prototype.mergeBlockedColumnsRulesForEveryEventType=function(e,t,i){var n=this;Object(s.forEach)(e,function(e,a){"*"!==a&&(Object(s.isEmpty)(n.fixedColumnRules[t])||Object(s.isEmpty)(n.fixedColumnRules[t][a])?n.columnBlockingRules[t][a]=Object(s.merge)(e,i):(n.columnBlockingRules[t][a]={},Object(s.forEach)(e,function(e,i){e>(n.fixedColumnRules[t][a][i]||0)&&(n.columnBlockingRules[t][a][i]=e)}),n.columnBlockingRules[t][a]=Object(s.merge)(n.columnBlockingRules[t][a],i),Object(s.isEmpty)(n.columnBlockingRules[t][a])&&delete n.columnBlockingRules[t][a]))})},e}();i.d(t,"a",function(){return g});var p=function(){function e(){var e=this;this.initialized=!1,this.eventDecoratorCallbacks=[],this.flush=function(){return e.telemetryProvider.flush()},this.telemetryProvider=Object(n.b)(),Object(a.a)(function(){e.initialized=!1,e.eventDecoratorCallbacks=[]})}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.telemetryProvider.sessionId},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e,t,i){this.initialized||(this.consoleLogger=t,this.consoleLogger.debug("TelemetrySender initialized."),o.a.getInstance().initialize(i),this.columnSuppressionService=new u(i),this.telemetryProvider.initialize(e,this.consoleLogger,this.columnSuppressionService),this._tablePostfix=e.documentInfo.tablePostfix||"",this.initialized=!0)},e.getInstance=function(){return this.telemetrySender||(this.telemetrySender=new e),this.telemetrySender},e.prototype.registerEventDecorator=function(e){this.eventDecoratorCallbacks.push(e)},e.prototype.sendTelemetry=function(e,t,i,a,s){if(void 0===i&&(i={}),this.initialized){t=t.replace(/\-/g,"_").toLowerCase();var l=(""+r.a[e]+this._tablePostfix).toLowerCase(),c=e===r.a.Scenario?i["Scenario.Status"]:e===r.a.Http?i.resultCode:void 0,u=o.a.getInstance().getSampleRate(l,t,c);if(u!==o.b){this.decorateEvent(t,i);var p=this.telemetryProvider.createEvent(l,t,i,a,s);p.setProperty("sampleRate",u);var g=e===r.a.UserBI?n.a.userBi:n.a.default;this.telemetryProvider.logEvent(g,p)}}},e.prototype.decorateEvent=function(e,t){this.eventDecoratorCallbacks.forEach(function(i){return i(e,t)})},e}();function g(e,t,i,n,a){p.getInstance().sendTelemetry(e,t,i,n,a)}},"5f0dbee501b8046e840c":function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),function(e){e[e.Perf=0]="Perf",e[e.Scenario=1]="Scenario",e[e.Logging=2]="Logging",e[e.Tracking=3]="Tracking",e[e.Heartbeat=4]="Heartbeat",e[e.Http=5]="Http",e[e.UserBI=6]="UserBI"}(n||(n={}))},"9c09065bd76afcf0a959":function(e,t,i){"use strict";i.r(t);var n,a=i("275976081ce1abf67779"),r=i("298834ef555136219449"),o=i("c4e5d556b9dfef6082b0"),s=i("66ed9b0e2e19f957591e"),l=i("2fb8223a0230e17c2ea9"),c=i("9b08f2e86f0e0f9ec656"),u=i("a689a10faf924dde39cc"),p=i("68ad756829a3e387be42"),g=i("4240efd871ae15138fcf"),d=i("3a3917c057079b816e70"),h=i("56e93fab5efcffbf24fb"),m=i("cf694d8109b055738d55"),b=i("d3bb8f02f954659262db"),S=i("64328bb588b46459132d"),f=12e4,y={"cdl-request":!0},v=i("348426a60b7cb4dbeb31"),C=i("e4015b2ea28f962ed7da"),P=i("5f0dbee501b8046e840c"),w=i("94a755535d135f12850c"),T="Scenario.Step",k=function(){function e(e,t,i,n,a,r,o,s,l,c,u,p,g,d){var h,m=this;void 0===c&&(c=!1),void 0===u&&(u=!1),void 0===p&&(p=!1),void 0===g&&(g=C.a.Expanded),this._id=e,this._name=t,this._eventData=i,this.scenarioFactory=n,this.logger=a,this.timeout=r,this.diagnosticsService=o,this.callback=s,this.memoryAnalyzer=l,this.enableDiagnostics=c,this.markStepsInTrace=u,this.showAllConsoleLogs=p,this.scenarioMode=g,this.reportActivity=d,this.steps=[],this.stepsEx=[],this._sequence=0,this.__stepsPerfInfo__=[],this.getTotalPauseDuration=function(){return m.pauseInfo.totalTime},this._currentStep=C.c.Unknown,this._timestamps=[],this._isHoisted=!1,this.active=!0,this.pauseInfo={reason:"",startTime:0,totalTime:0};var b=0;i.overrideTimestamp?(b=i.overrideTimestamp-Date.now(),i.overrideTimestamp=void 0):i.offsetCurrentTimeInMs&&(b=-i.offsetCurrentTimeInMs,i.offsetCurrentTimeInMs=void 0),this._absoluteStartTime=Date.now()+b,this.intervalTimestamp=this.relativeTimestamp=this.scenarioFactory.timestamp()+b,this.memoryDataInitial=null===(h=this.memoryAnalyzer)||void 0===h?void 0:h.snapshotMemoryUsage()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absoluteStartTime",{get:function(){return this._absoluteStartTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delta",{get:function(){return this.scenarioFactory.timestamp()-this.relativeTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeoutMs",{get:function(){return this.timeout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventData",{get:function(){return this._eventData},set:function(e){this._eventData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamps",{get:function(){return this._timestamps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!!this.pauseInfo.startTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHoisted",{get:function(){return this._isHoisted},set:function(e){this._isHoisted=e},enumerable:!1,configurable:!0}),e.prototype.appendEventData=function(e){this.eventData=Object(S.__assign)(Object(S.__assign)({},this.eventData),e)},e.prototype.markAggregateStart=function(e){this.active?(this.aggregateStepStartTime||(this.aggregateStepStartTime={}),this.aggregateStepStartTime[e]||(this.aggregateStepStartTime[e]=performance.now())):this.logger.debug("Scenario '"+this.name+"' set to inactive")},e.prototype.markAggregateStop=function(e){this.active&&this.aggregateStepStartTime[e]&&(this.aggregateStepTotalTime||(this.aggregateStepTotalTime={}),this.aggregateStepTotalTime[e]||(this.aggregateStepTotalTime[e]=0),this.aggregateStepTotalTime[e]+=performance.now()-this.aggregateStepStartTime[e],this.aggregateStepStartTime[e]=void 0)},e.prototype.pause=function(e,t){if(this.active&&!this.isPaused){this._currentStep!==C.c.Unknown&&this.mark(this._currentStep);var i=e.reason,n=Object(S.__rest)(e,["reason"]);this.mark(C.c.Pause,Object(S.__assign)({pauseReason:i},n),void 0,t),this.pauseInfo=Object(S.__assign)(Object(S.__assign)({},this.pauseInfo),{reason:i,startTime:Date.now()})}},e.prototype.resume=function(e,t){if(this.active&&this.isPaused){var i=this.pauseInfo.startTime?Date.now()-this.pauseInfo.startTime:0;this.pauseInfo.totalTime=(this.pauseInfo.totalTime||0)+i,this.mark(C.c.Resume,Object(S.__assign)(Object(S.__assign)({},e),{pauseReason:this.pauseInfo.reason}),void 0,t),this.pauseInfo.reason="",this.pauseInfo.startTime=0}},e.prototype.stop=function(e,t,i){var n=this;void 0===t&&(t="success"),this._currentStep!==C.c.Unknown&&this.mark(this._currentStep,void 0,t,i),this.aggregateStepTotalTime&&(Object(w.each)(Object.keys(this.aggregateStepTotalTime),function(e){var t=parseInt(n.aggregateStepTotalTime[e].toString(),10);n.mark(e,{stepDelta:t},void 0,i)}),this.aggregateStepTotalTime=null,this.aggregateStepStartTime=null),this.createMark(C.c.Stop,e,t,!0,i).then(function(){n.active&&(n.active=!1),n.callback&&n.callback(t),n.scenarioFactory.clearScenario(n)})},e.prototype.fail=function(e,t){this.stop(e,"failure",t)},e.prototype.cancel=function(e,t){this.stop(e,"abandoned",t)},e.prototype.incomplete=function(e,t){this.stop(e,"incomplete",t)},e.prototype.mark=function(e,t,i,n){void 0===i&&(i="success"),this.createMark(e,t,i,!1,n),this._currentStep=C.c.Unknown},e.prototype.startStep=function(e){this._currentStep!==C.c.Unknown&&e!==this._currentStep&&this.mark(this._currentStep),this._currentStep=e},e.prototype.prepareAndSendTelemetry=function(e,t){var i=this;this.eventData&&this.eventData!==e&&(e=Object(S.__assign)(Object(S.__assign)({},this.eventData),e)),e.InstanceId=this.id,e=this.getEventDataWithComutedValues(e),this.enableDiagnostics&&this.diagnosticsService&&this.diagnosticsService.pushTelemetryEvent(P.a[P.a.Scenario],e),e["Scenario.Mode"]=this.scenarioMode;var n,a=e[T];if(a!==C.c.Start&&(this.scenarioMode!==C.a.Expanded&&(this.packStandardAttributes(e),a===C.c.Stop&&(e["Scenario.Steps"]=JSON.stringify(this.steps),n={columnName:"Scenario.StepsEx",packedData:this.stepsEx})),this.scenarioMode!==C.a.Packed||a===C.c.Stop)){var r=function(){return Object(v.a)(P.a.Scenario,i.name,e,t,n)};a!==C.c.Stop?r():Promise.all([this.updateEventDataMemory(e)]).then(function(){r()}).catch(function(){r()})}this.logScenarioPerf(e)},e.prototype.logScenarioPerf=function(e){if(this.showAllConsoleLogs){var t=e[T],i=t===C.c.Start?"[step]("+this._sequence+")"+t:t===C.c.Stop?"[step]("+this._sequence+")"+t+" ("+e.stepDelta+"ms/"+e.delta+"ms)":"[step]("+this._sequence+")"+t+" ("+e.stepDelta+"ms)";this.logger&&this.logger.log("[Scenario]"+this.name+" "+i),this.__stepsPerfInfo__.push({name:t,stepDelta:e.stepDelta,delta:e.delta})}},e.prototype.updateEventDataMemory=function(e){var t=this;return this.memoryAnalyzer?this.memoryAnalyzer.snapshotMemoryUsageAsync().then(function(i){var n,a,r;i&&(i.jsHeapStatistics&&(e.jsUsedHeapSize=i.jsHeapStatistics.used_heap_size,e.jsUsedHeapSizeDelta=(null===(n=t.memoryDataInitial)||void 0===n?void 0:n.jsHeapStatistics)?t.memoryDataInitial.jsHeapStatistics.used_heap_size-i.jsHeapStatistics.used_heap_size:void 0),i.processMemoryInfo&&(e.workingSet=i.processMemoryInfo.workingSetSize,e.workingSetDelta=(null===(a=t.memoryDataInitial)||void 0===a?void 0:a.processMemoryInfo)?i.processMemoryInfo.workingSetSize-t.memoryDataInitial.processMemoryInfo.workingSetSize:void 0,e.privateBytes=i.processMemoryInfo.privateBytes,e.privateBytesDelta=(null===(r=t.memoryDataInitial)||void 0===r?void 0:r.processMemoryInfo)?i.processMemoryInfo.privateBytes-t.memoryDataInitial.processMemoryInfo.privateBytes:void 0))}):Promise.resolve()},e.prototype.getEventDataWithComutedValues=function(e){var t,i=this.intervalTimestamp;Object(w.isNumber)(e.overrideTimestamp)?(t=this.relativeTimestamp+e.overrideTimestamp-this._absoluteStartTime,e.overrideTimestamp=void 0):e.offsetCurrentTimeInMs?(t=this.scenarioFactory.timestamp()-e.offsetCurrentTimeInMs,e.offsetCurrentTimeInMs=void 0):t=e[T]===C.c.Start?this.relativeTimestamp:this.scenarioFactory.timestamp(),this._timestamps.push(t),this.intervalTimestamp=t;var n=Object(w.isNumber)(e.stepDelta)?e.stepDelta:t-i,a=Object(w.isNumber)(e.delta)?e.delta:t-this.relativeTimestamp-this.getTotalPauseDuration(),r=Object(w.isNumber)(e.elapsed)?e.elapsed:t,o=Object(w.isNumber)(e.elapsedSinceCoreInit)?e.elapsedSinceCoreInit:this.scenarioFactory.timestamp({isFromCoreInit:!0}),s=this._sequence,l=!!this.scenarioFactory.findScenario(C.b.WindowLaunchTime);return Object(S.__assign)(Object(S.__assign)({},e),{isInEst:l,stepDelta:n,delta:a,elapsed:r,elapsedSinceCoreInit:o,sequence:s})},e.prototype.packStandardAttributes=function(e){var t={};t["Scenario.Status"]=e["Scenario.Status"],t[T]=e[T],t.stepDelta=e.stepDelta,t.elapsed=e.elapsed,t.delta=e.delta,t.sequence=e.sequence,this.steps.push(t)},e.prototype.getMonitoringDataOverride=function(e){var t=e;return this.name!==C.b.WindowLaunchTime&&this.name!==C.b.ExperienceReady||(t=e?Object(w.cloneDeep)(e):{scenarioPriority:"P0",data:[]}).data.push({key:"App",value:this.eventData.contentSlotApp}),t},e.prototype.createMark=function(e,t,i,n,a){return void 0===t&&(t={}),Object(S.__awaiter)(this,void 0,void 0,function(){var r,o,s,l;return Object(S.__generator)(this,function(c){return e&&this.active?(e!==C.c.Stop&&e!==C.c.Start&&this.scenarioMode!==C.a.Expanded&&void 0!==t&&this.stepsEx.push(Object(w.cloneDeep)(t)),t["Scenario.Status"]=i,t[T]=e,t["Scenario.Name"]=this.name,r=this.getMonitoringDataOverride(a),performance&&performance.mark&&performance.measure&&!y.hasOwnProperty(this.name)&&(o=t[T]+" "+t["Scenario.Name"]+"-"+this.id,performance.mark(o),t[T]===C.c.Stop&&(s="start "+t["Scenario.Name"]+"-"+this.id,0===(performance.getEntriesByName(s,"mark")||[]).length&&(s="navigationStart"),l=this.clientName?" ("+this.clientName+")":"",performance.measure(""+t["Scenario.Name"]+l,s,o)),this.markStepsInTrace&&(this.previousMark&&performance.measure(t["Scenario.Name"]+" ["+this.previousMark+" <=> "+t[T]+"]",this.previousMark+" "+t["Scenario.Name"]+"-"+this.id,t[T]+" "+t["Scenario.Name"]+"-"+this.id),this.previousMark=t[T])),this.prepareAndSendTelemetry(t,r),this.active=this.active&&!n,this.reportActivity&&this.reportActivity(t),this._sequence+=1,[2]):[2]})})},e}(),M=i("3e9c7e5351d86134f5f6"),O=function(){function e(e){this._name=e}return Object.defineProperty(e.prototype,"id",{get:function(){return"noop"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delta",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeoutMs",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventData",{get:function(){return{}},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamps",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHoisted",{get:function(){return!1},set:function(e){},enumerable:!1,configurable:!0}),e.prototype.appendEventData=function(e){},e.prototype.pause=function(e){},e.prototype.resume=function(e){},e.prototype.cancel=function(e){},e.prototype.mark=function(e,t,i){},e.prototype.startStep=function(e){},e.prototype.stop=function(e,t){},e.prototype.fail=function(e){},e.prototype.incomplete=function(e){},e.prototype.markAggregateStart=function(e){},e.prototype.markAggregateStop=function(e){},e.prototype.getTotalPauseDuration=function(){return 0},e}(),R=function(){function e(e,t,i,n,a,r,o,s){var l=this;void 0===i&&(i=0),void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===r&&(r=!1),this.diagnosticsService=t,this.appStartTimestamp=i,this.enableDiagnostics=n,this.markStepsInTrace=a,this.showAllConsoleLogs=r,this.memoryAnalyzer=s,this.activeScenarios=[],this.scenarioTimeoutMs=f,this.markStep=function(e,t,i){var n=l.findScenario(e);n&&n.mark(t,i&&i.eventData,i&&i.status,i&&i.monitoringData)},this.startStep=function(e,t){var i=l.findScenario(e);i&&i.startStep(t)},this.timestamp=function(){return Date.now()-l.appStartTimestamp},this.setTimeoutCallback=(null==o?void 0:o.setTimeout)||setTimeout,this.clearTimeoutCallback=(null==o?void 0:o.clearTimeout)||clearTimeout,this.logger=e.newLogger("Telemetry"),this.logger.debug("Initialized ScenarioFactory")}return e.prototype.newScenario=function(e,t){var i=this.createScenarioWithoutStarting(e,t);return i.mark("start",void 0,void 0,t&&t.monitoringData),i},e.prototype.createScenarioWithoutStarting=function(e,t){if(void 0===t&&(t={}),0===this.appStartTimestamp)return new O(e);var i=void 0===t.captureMemoryUsage||t.captureMemoryUsage,n={};isNaN(t.startTime)||null===t.startTime||(n.overrideTimestamp=t.startTime);var a=Object(M.v4)(),r=new k(a,e,n,this,this.logger,t.timeoutMs||this.scenarioTimeoutMs,this.diagnosticsService,t.callback,i?this.memoryAnalyzer:void 0,this.enableDiagnostics,this.markStepsInTrace,this.showAllConsoleLogs),o=this.setupScenarioTimeout(r);return this.activeScenarios.push({scenario:r,timeoutId:o}),r},e.prototype.cancelExistingAndCreateScenario=function(e,t,i,n,a){var r=this.findScenario(e);if(r){var o=[{reason:t}];r.cancel({errors:JSON.stringify(o)})}return r=this.newScenario(e,{timeoutMs:i,callback:n,monitoringData:a})},e.prototype.stopScenarioIfActive=function(e,t,i,n){var a=this.findScenario(e);a&&a.stop(t,i,n)},e.prototype.findScenario=function(e){if(!e)return null;var t=Object(w.findLast)(this.activeScenarios,function(t){return t&&t.scenario.name===e||t.scenario.clientId===e})||null;return t?t.scenario:null},e.prototype.findScenarioByNameAndId=function(e,t){var i=Object(w.findLast)(this.activeScenarios,function(i){return i.scenario.name===e&&i.scenario.clientId===t})||null;return i?i.scenario:null},e.prototype.clearScenario=function(e){var t=Object(w.findIndex)(this.activeScenarios,function(t){return t.scenario===e});if(t>-1){var i=this.activeScenarios.splice(t,1)[0];this.clearTimeoutCallback(i.timeoutId)}},e.prototype.setContext=function(){},e.prototype.setupScenarioTimeout=function(e,t){var i=e.timeoutMs;return this.setTimeoutCallback(function(){e.stop(e.eventData,"timeout",t)},i)},e}(),E=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),I=function(e){function t(t){var i=e.call(this,t)||this;i.enableChannelFilesTabDocLibBreadcrumb=!1,i.enableMountPointRenderOption=!1,i.newKeyIdentifierFlag=!1,i.changeTheme=function(e){i.setState({currentTheme:e})},i.changeUserPref=function(e){i.setState({currentUserPref:e})};var n=d.a.getAppState().currentTheme;i.state={currentTheme:n,currentUserPref:t.getUserFileOpenPreference&&t.getUserFileOpenPreference()||s.d.Teams},i.scenario=g.a.findScenario(s.I.getTeamFilesV2),i.serviceName=s.J.teams;var a=t.analyticsService,r=t.clientDatabaseProvider,o=t.settingsService;if(i.analyticsService=a||new p.a,r&&u.a.initialize(r),o){var l=new m.a(o);c.a.initialize(l,new R(g.a));var S=l.get(h.a.Telemetry).telemetryServer;i.ariaCollectorUrl=S;var f=l.get(h.a.Metadata).ring;i.userRing=null==f?void 0:f.id;var y=new b.a(o);i.filesScenarioTimeoutInSeconds=y.filesScenarioTimeoutInSeconds,i.newKeyIdentifierFlag=y.enableNewLocalStoreKeyIdentifier,i.clientType=y.clientType,i.enableChannelFilesTabDocLibBreadcrumb=y.enableChannelFilesTabDocLibBreadcrumb||!1,i.enableMountPointRenderOption=y.enableMountPointRenderOption||!1}return i}return E(t,e),t.prototype.render=function(){return a.createElement(r.b,{currentTheme:Object(l.b)(this.state.currentTheme),analyticsService:this.analyticsService},a.createElement(r.a,{compileIntoAngular:this.props.compileIntoAngular},a.createElement(o.b,{analyticsService:this.analyticsService},this.getSharePointLayout())))},t.prototype.getSharePointLayout=function(){return a.createElement(r.e,{onCopyLink:this.props.onCopyLink,addCloudStorage:this.props.addCloudStorage,addSPCloudStorageWithPromise:this.props.addSPCloudStorageWithPromise,deleteCloudStorage:this.props.deleteCloudStorage,siteInfo:this.props.siteInfo,threadId:this.props.threadId,teamThreadId:this.props.teamThreadId,isChannelOwner:this.props.isChannelOwner,acquireToken:this.props.acquireToken,downloadFiles:this.props.downloadFiles,scenario:this.scenario,loggingPrefix:s.I.channelFilesPrefix,pinToTabAction:this.props.pinToTabAction,changeDefaultAppAction:this.props.changeDefaultAppAction,moveFiles:this.props.moveFiles,copyFiles:this.props.copyFiles,serviceName:this.serviceName,currentTheme:Object(l.b)(this.state.currentTheme),getChannelCloudStorageFolders:this.props.getChannelCloudStorageFolders,isFreemium:this.props.isFreemium,enableFilesCopyShareLink:this.props.enableFilesCopyShareLink,enableNStarViewerExpInMainWindow:this.props.enableNStarViewerExpInMainWindow,provisionSpecialDocumentLibraries:this.props.provisionSpecialDocumentLibraries,enableChannelFilesPrefetchBridge:this.props.enableChannelFilesPrefetchBridge,filesScenarioTimeoutInSeconds:this.filesScenarioTimeoutInSeconds,renderedWindowsAhead:this.props.renderedWindowsAhead,renderedWindowsBehind:this.props.renderedWindowsBehind,createFolderAndRefreshSiteUrl:this.props.createFolderAndRefreshSiteUrl,enablePromoteChannelFolder:this.props.enablePromoteChannelFolder,newLocalStorageKeyIdentifierFlag:this.newKeyIdentifierFlag,userRing:this.userRing,clientVersion:this.props.clientVersion,isDownloadBlocked:this.props.isDownloadBlocked,isEditMetadataEnabled:this.props.isEditMetadataEnabled,enableDesktopUsePluginess:this.props.enableDesktopUsePluginess,enableWindowOpenForProtocolHandlerInvocation:this.props.enableWindowOpenForProtocolHandlerInvocation,enableWebAsDefaultFileOpenPreference:this.props.enableWebAsDefaultFileOpenPreference,handleFileOpenPreferenceUpdate:this.props.handleFileOpenPreferenceUpdate,currentUserPref:this.state.currentUserPref,isFileOpenExperimentEnabled:!!this.props.isFileOpenExperimentEnabled,clientType:this.clientType,isGeneralChannel:this.props.isGeneralChannel||!1,enableChannelFilesTabDocLibBreadcrumb:this.enableChannelFilesTabDocLibBreadcrumb,enableMountPointRenderOption:this.enableMountPointRenderOption,ariaCollectorUrl:this.ariaCollectorUrl})},t}(a.Component);i.d(t,"ChannelFilesRoot",function(){return I})},cf694d8109b055738d55:function(e,t,i){"use strict";var n=i("64328bb588b46459132d"),a=i("56e93fab5efcffbf24fb"),r=i("e88a8106e72c3f2e7fd4"),o=i("2cb027059b5fbe2cc8a6"),s=i("640a68d4e52093ac8444"),l=i("6871d1ea20c032a12e30"),c=i("06c58f420a0677aad466"),u=i("d3bb8f02f954659262db"),p=i("604f694397cd1f47d3c5"),g={allowBroadcastSchedulingPolicy:"allowBroadcastSchedulingPolicy",allowChannelMeetingSchedulingPolicy:"allowChannelMeetingSchedulingPolicy",allowEngagementReportPolicy:"allowEngagementReportPolicy",allowFluidCollaboratePolicy:"allowFluidCollaboratePolicy",allowMeetingRegistrationPolicy:"allowMeetingRegistrationPolicy",allowPrivateMeetingSchedulingPolicy:"allowPrivateMeetingSchedulingPolicy",calendarEventsPollIntervalInMs:"calendarEventsPollIntervalInMs",calendarRESTEnabledAPIs:"calendarRESTEnabledAPIs",debounceSchedulingFormPeoplePickerGuestSearchinMillis:"debounceSchedulingFormPeoplePickerGuestSearchinMillis",disableCalendarFeaturesInMultiwindow:"disableCalendarFeaturesInMultiwindow",disableFormOptimization:"disableFormOptimization",enableAllowFluidCollaboratePolicyBypass:"enableAllowFluidCollaboratePolicyBypass",enableAppsGalleryinMeetingChat:"enableAppsGalleryinMeetingChat",enableBIMCalendarSurface:"enableBIMCalendarSurface",enableCalendarAttachments:"enableCalendarAttachments",enableCalendarCategories:"enableCalendarCategories",enableCalendarCopyLink:"enableCalendarCopyLink",enableCalendarDialogBridge:"enableCalendarDialogBridge",enableCalendarEventGroupChiclet:"enableCalendarEventGroupChiclet",enableCalendarEventsBackgroundSync:"enableCalendarEventsBackgroundSync",enableCalendarEventsPrefetchPrevNextWeek:"enableCalendarEventsPrefetchPrevNextWeek",enableCalendarJoinButtonWithIcon:"enableCalendarJoinButtonWithIcon",enableCalendarNstarExtensibilityTabs:"enableCalendarNstarExtensibilityTabs",enableCalendarSchedulingFormNewPeoplePill:"enableCalendarSchedulingFormNewPeoplePill",enableCalendarSchedulingFormPreReleaseFeatures:"enableCalendarSchedulingFormPreReleaseFeatures",enableCalendarShareLinkDialog:"enableCalendarShareLinkDialog",enableCalendarShareLinkDialogPostMeetingCreation:"enableCalendarShareLinkDialogPostMeetingCreation",enableCalendarTenantCheckForPeopleSearch:"enableCalendarTenantCheckForPeopleSearch",enableCalendarV2ApiService:"enableCalendarV2ApiService",enableCalendarV2ApiServiceEnterprise:"enableCalendarV2ApiServiceEnterprise",enableCalendarV2EventForwarding:"enableCalendarV2EventForwarding",enableCalendarV2MeetingPrep:"enableCalendarV2MeetingPrep",enableCalendarV2PreReleaseFeatures:"enableCalendarV2PreReleaseFeatures",enableCalendarV2ShowAs:"enableCalendarV2ShowAs",enableCallTranscriptPostMeetingSpeakerAttribution:"enableCallTranscriptPostMeetingSpeakerAttribution",enableCallTranscriptPostMeetingSpeakerAttributionEdit:"enableCallTranscriptPostMeetingSpeakerAttributionEdit",enableEngagementReportPolicyCheck:"enableEngagementReportPolicyCheck",enableEngagementReportPolicyTestHook:"enableEngagementReportPolicyTestHook",enableFreemiumAgendaView:"enableFreemiumAgendaView",enableThirdPartyCalendar:"enableThirdPartyCalendar",enableFreemiumCalendarShareViaGoogle:"enableFreemiumCalendarShareViaGoogle",enableFreemiumCalendarShareViaOutlook:"enableFreemiumCalendarShareViaOutlook",enableFreemiumMeetingInviteWithDate:"enableFreemiumMeetingInviteWithDate",enableGetCalendarEventsFromRest:"enableGetCalendarEventsFromRest",enableGroupEventsInGeneralChannelCalendar:"enableGroupEventsInGeneralChannelCalendar",enableInlineMeetingOptions:"enableInlineMeetingOptions",enableMeetingArtifacts:"enableMeetingArtifacts",enableMeetingInfoDropdown:"enableMeetingInfoDropdown",enableMeetingOptionsButton:"enableMeetingOptionsButton",enableMeetNowSharePanelInCalendar:"enableMeetNowSharePanelInCalendar",enableMultiWindowCalendarSchedulingForm:"enableMultiWindowCalendarSchedulingForm",enableMultiWindowCalendarSchedulingFormViewAndEdit:"enableMultiWindowCalendarSchedulingFormViewAndEdit",enableMultiWindowWebinarRegistration:"enableMultiWindowWebinarRegistration",enableMultiWindowUseProjectStyles:"enableMultiWindowUseProjectStyles",enableOnlineAppointment:"enableOnlineAppointment",enableQuickCreateForFreemiumCalendar:"enableQuickCreateForFreemiumCalendar",enableRecordingPostMeeting:"enableRecordingPostMeeting",enableRequireRegistrationInMeetingSchedulingForm:"enableRequireRegistrationInMeetingSchedulingForm",enableRockfallCalendarMeetingSchedulingEnhancements:"enableRockfallCalendarMeetingSchedulingEnhancements",enableSchedulingFormTrackingViewSummary:"enableSchedulingFormTrackingViewSummary",enableSchedulingWebinars:"enableSchedulingWebinars",enableSpeedyMeetings:"enableSpeedyMeetings",enableWebinarPolicyCheck:"enableWebinarPolicyCheck",engagementReportPolicyTestHookOverride:"engagementReportPolicyTestHookOverride",freemiumCalendarShareViaGoogleAllowedDomains:"freemiumCalendarShareViaGoogleAllowedDomains",freemiumCalendarShareViaOutlookAllowedDomains:"freemiumCalendarShareViaOutlookAllowedDomains",isConsumerWindow:"isConsumerWindow",isMeetingOnenoteAgendaEnabled:"isMeetingOnenoteAgendaEnabled",meetingOptionsUrl:"meetingOptionsUrl",noOfAttendeesForShowingTrackingViewSummary:"noOfAttendeesForShowingTrackingViewSummary",useWebviewForFluid:"useWebviewForFluid",whoCanRegisterPolicy:"whoCanRegisterPolicy"},d=i("94a755535d135f12850c");i.d(t,"a",function(){return h});var h=function(){function e(e,t){var i;this.settingsService=e,this.policySettingsStoreService=t,this.settingsCache={},this.itProSettings={isBroadcastSchedulingAllowed:!1,isPrivateMeetingSchedulingAllowed:!0,isChannelMeetingSchedulingAllowed:!0,allowEngagementReport:a.b.AllowEngagementReport.Disabled,allowMeetingRegistration:!1,whoCanRegister:a.b.WebinarRegisterPolicy.EveryoneInCompany,allowFluidCollaborate:!0},this.userPropertiesSettings={},this.settingsByCategoryMap=new Map([[a.a.Metadata,{getSettings:this.getMetadataSettings.bind(this),namespace:r.b}],[a.a.Test,{getSettings:this.getTestSettings.bind(this),namespace:r.b}],[a.a.Auth,{getSettings:this.getAuthSettings.bind(this),namespace:r.b}],[a.a.Telemetry,{getSettings:this.getTelemetrySettings.bind(this),namespace:r.b}],[a.a.Host,{getSettings:this.getHostSettings.bind(this),namespace:r.b}],[a.a.Localization,{getSettings:this.getLocalizationSettings.bind(this),namespace:r.b}],[a.a.Calendar,{getSettings:this.getCalendarSettings.bind(this),namespace:r.b}],[a.a.Platform,{getSettings:this.getPlatformSettings.bind(this),namespace:r.b}],[a.a.ChatList,{getSettings:this.getChatListSettings.bind(this),namespace:r.b}],[a.a.Shortcuts,{getSettings:this.getShortcutsSettings.bind(this),namespace:r.b}],[a.a.WebinarRegistration,{getSettings:this.getWebinarRegistrationSettings.bind(this),namespace:r.b}]]),this.userPropertiesSettings=null!==(i=null==t?void 0:t.getUserPropertiesSettings())&&void 0!==i?i:{}}return e.prototype.get=function(e){return this.getSubject(e).value},e.prototype.getObservable=function(e){return this.getSubject(e).asObservable()},e.prototype.getSubject=function(e){var t=this;if(this.settingsCache[e])return this.settingsCache[e];var i=this.getSettingsForCategory(e),n=i.subscriptionNamespace,r=i.settings,o=new c.a(r||{});this.settingsCache[e]=o;e===a.a.Calendar&&this.policySettingsStoreService&&this.getCalendarPolicySettings(o);var s=new l.a("adapter-"+e+"-"+n,function(){var i=t.getSettingsForCategory(e).settings;o.next(i)},n);return this.settingsService.addListener(s),o},e.prototype.getSettingsForCategory=function(e){var t=this.settingsByCategoryMap.get(e),i=e.toString().toLowerCase(),n=t?t.getSettings():this.settingsService.getSettingsForNamespace(i)||{};return{subscriptionNamespace:t?t.namespace:i,settings:n}},e.prototype.getMetadataSettings=function(){var e,t=new u.a(this.settingsService).ring,i=this.settingsService.get(p.a.EnvironmentType,p.a.EnvironmentKey);return t&&(e={id:t.id||"general",friendlyName:t.friendlyName,shortName:t.shortName}),{ring:e,eTag:null==t?void 0:t.eTag,environment:i}},e.prototype.getTestSettings=function(){return{isRunningGlassjar:this.settingsService.getBoolean("isRunningGlassjar"),mtAuthResourceOverride:this.settingsService.getString("skypeAuthEndpointAddressV2"),mtOverrideBaseUrl:this.settingsService.getString("mtOverrideBaseURL")}},e.prototype.getAuthSettings=function(){var e=this.settingsService.get("authConstants");if(e){var t=e.skypeAuthEndpointAddressV2,i=Object(d.isArray)(e.resources)&&e.resources.length>0&&e.resources[0];return{authzEndpointUrl:t,mtResource:i,authzResource:this.settingsService.get("isConsumerWindow")?e.consumerAuthzResource:i}}return{}},e.prototype.getTelemetrySettings=function(){var e,t,i,n,a,r,s=this.settingsService.get("loggingConstants"),l=this.isScenarioMemorySnapshotEnabled();s&&(i=s.telemetryserver,n=null===(e=s.appTokens)||void 0===e?void 0:e.default,a=null===(t=s.appTokens)||void 0===t?void 0:t.userBi,r=!!s.silent&&s.silent,this.settingsService.get(p.a.EnvironmentType,p.a.EnvironmentKey)!==o.a.Prod&&s.appTokens&&s.appTokens.test&&(n=s.appTokens.test,a=s.appTokens.test));return{defaultToken:n,isSilent:r,telemetryServer:i,userBiToken:a,isScenarioMemorySnapshotEnabled:l}},e.prototype.getHostSettings=function(){return{keyboardLayoutLanguage:this.settingsService.getString("keyboardLayoutLanguage")}},e.prototype.getLocalizationSettings=function(){return{enableLocalizedKeyboardShortcuts:this.settingsService.getBoolean("enableLocalizedKeyboardShortcuts")}},e.prototype.getCalendarSettings=function(){var e=this,t=Object(d.mapValues)(g,function(t){return e.settingsService.get(t)}),i=this.itProSettings,a={allowChannelMeetingSchedulingPolicy:i.isChannelMeetingSchedulingAllowed,allowPrivateMeetingSchedulingPolicy:i.isPrivateMeetingSchedulingAllowed,allowBroadcastSchedulingPolicy:i.isBroadcastSchedulingAllowed,allowEngagementReportPolicy:i.allowEngagementReport,allowMeetingRegistrationPolicy:i.allowMeetingRegistration,whoCanRegisterPolicy:i.whoCanRegister,allowFluidCollaboratePolicy:i.allowFluidCollaborate};return Object(n.__assign)(Object(n.__assign)(Object(n.__assign)({},t),a),this.userPropertiesSettings)},e.prototype.getCalendarPolicySettings=function(e){var t=this,i=this.initializeCalendarPolicySettings(),n=i.isChannelMeetingSchedulingAllowedPromise,r=i.isPrivateMeetingSchedulingAllowedPromise,o=i.broadcastPolicySettingsPromise,s=i.allowMeetingRegistrationPromise,l=i.allowEngagementReportPromise,c=i.whoCanRegisterPromise,u=i.allowFluidCollaboratePromise;this.initializeBroadcastPolicySettingsPromise(o,e),Promise.all([n,r,l,s,c,u]).then(function(i){var n=i[0],a=i[1],r=i[2],o=i[3],s=i[4],l=i[5];t.itProSettings.isChannelMeetingSchedulingAllowed=n,t.itProSettings.isPrivateMeetingSchedulingAllowed=a,t.itProSettings.allowEngagementReport=r,t.itProSettings.allowMeetingRegistration=o,t.itProSettings.whoCanRegister=s,t.itProSettings.allowFluidCollaborate=null==l||l;var c=t.getCalendarSettings();e.next(c)}).catch(function(){t.itProSettings.isChannelMeetingSchedulingAllowed=!1,t.itProSettings.isPrivateMeetingSchedulingAllowed=!1,t.itProSettings.allowEngagementReport=a.b.AllowEngagementReport.Disabled,t.itProSettings.allowMeetingRegistration=!1,t.itProSettings.whoCanRegister=a.b.WebinarRegisterPolicy.EveryoneInCompany,t.itProSettings.allowFluidCollaborate=!0;var i=t.getCalendarSettings();e.next(i)}),this.updateUserPropertiesSettings(e)},e.prototype.initializeCalendarPolicySettings=function(){return{isChannelMeetingSchedulingAllowedPromise:this.policySettingsStoreService.isChannelMeetingSchedulingAllowed(),isPrivateMeetingSchedulingAllowedPromise:this.policySettingsStoreService.isPrivateMeetingSchedulingAllowed(),broadcastPolicySettingsPromise:this.policySettingsStoreService.getBroadcastPolicySettings(),allowEngagementReportPromise:this.policySettingsStoreService.allowEngagementReport(),allowMeetingRegistrationPromise:this.policySettingsStoreService.allowMeetingRegistration(),whoCanRegisterPromise:this.policySettingsStoreService.whoCanRegister(),allowFluidCollaboratePromise:this.policySettingsStoreService.allowFluidCollaborate()}},e.prototype.initializeBroadcastPolicySettingsPromise=function(e,t){var i=this;e.then(function(e){i.itProSettings.isBroadcastSchedulingAllowed=e.allowBroadcastScheduling;var n=i.getCalendarSettings();t.next(n)}).catch(function(){})},e.prototype.getPlatformSettings=function(){return{sessionId:this.settingsService.getString(p.a.SessionIdKey,p.a.PlatformKey)||this.settingsService.getString(p.a.SessionIdKey,p.a.CookiesKey)}},e.prototype.getChatListSettings=function(){return{enableBuddyList:this.settingsService.getBoolean(p.a.EnableBuddyList),hideSelectedChatLeftRailTypingIndicator:this.settingsService.getBoolean(p.a.HideSelectedChatLeftRailTypingIndicator)}},e.prototype.getShortcutsSettings=function(){var e=this.settingsService.get(p.a.ClientType,p.a.PlatformKey)===s.b.Desktop,t=this.settingsService.get(p.a.RingKey);return{applyDesktopKeymappingStrategy:e,enableDevShortcuts:!(!t||t.isPublic)}},e.prototype.isScenarioMemorySnapshotEnabled=function(){return this.settingsService.get(p.a.ClientType,p.a.PlatformKey)===s.b.Desktop&&this.settingsService.getBoolean(p.a.EnableMemoryDumpApi,p.a.DesktopSettingsKey)},e.prototype.getWebinarRegistrationSettings=function(){var e=this.settingsService.get("webinarSettings");return{webinarServiceEndpoint:e.serviceEndpoint,webinarServiceResource:e.serviceResource}},e.prototype.updateUserPropertiesSettings=function(e){var t,i=this;null===(t=this.policySettingsStoreService)||void 0===t||t.waitAndGetUserPropertiesSettings().then(function(t){var a=t.autodiscoverSettings,r=t.isOnCloud,o=i.getCalendarSettings();Object(d.isEqual)(a,o.autodiscoverSettings)&&r===o.isOnCloud||(i.userPropertiesSettings={autodiscoverSettings:a,isOnCloud:r},e.next(Object(n.__assign)(Object(n.__assign)({},o),i.userPropertiesSettings)))}).catch(function(){})},e}()}}]);